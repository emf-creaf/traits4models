[{"path":"https://emf-creaf.github.io/traits4models/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"An ongoing project","title":"An ongoing project","text":"traits4models R package aims becoming result collaborative work process-based modellers interested compiling plant trait data model parameter estimation. Therefore, open expanding set people contributing project.","code":""},{"path":"https://emf-creaf.github.io/traits4models/CONTRIBUTING.html","id":"contributing-to-traits4models","dir":"","previous_headings":"","what":"Contributing to traits4models","title":"An ongoing project","text":"Contributions development traits4models can done different aspects: Harmonized trait definition: data set HarmonizedTraitDefinition sets nomenclature, definition units plant traits package. want use package, current trait definition include given trait need, contribute package suggesting new definitions. Model parameter building: present, traits4models provides functions populate species parameter tables models medfate package. like use traits4models parameter estimation another process-based model, develop functions contribute package. Sharing trait/allometry sources: Discovering harmonizing trait data bases allometry databases tedious task. Sharing sources harmonized data sets among users traits4models can beneficial many people.","code":""},{"path":"https://emf-creaf.github.io/traits4models/CONTRIBUTING.html","id":"reporting-bugs-and-suggesting-enchancements","dir":"","previous_headings":"","what":"Reporting bugs and suggesting enchancements","title":"An ongoing project","text":"want report bug suggest enhancement, ’s good idea file issue traits4models repository GitHub. ’ve found bug, please file issue illustrates bug minimal reprex.","code":""},{"path":"https://emf-creaf.github.io/traits4models/CONTRIBUTING.html","id":"code-contributions","dir":"","previous_headings":"Reporting bugs and suggesting enchancements","what":"Code contributions","title":"An ongoing project","text":"making contributions package R code, make sure someone traits4models team agrees change suggest needed. Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"emf-creaf/traits4models\", fork = TRUE). Install development dependences devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://emf-creaf.github.io/traits4models/articles/AllometryDatabaseHarmonization.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Allometry database harmonization","text":"availability plant allometric equations continuously increases, additional efforts made observational studies. means multiple data sources need harmonized species parameter tables build, terms : result harmonization needs stored harmonized format subsequent use creating species parameter tables. vignette illustrates harmonization procedures example data set using package trait4models usual tidyverse packages. Harmonization plant trait data explained companion vignette.","code":"a) Nomenclature of the response and predictor variables. b) Allometric equation fitted. c) Taxonomy of the measured biological entities."},{"path":"https://emf-creaf.github.io/traits4models/articles/AllometryDatabaseHarmonization.html","id":"required-packages","dir":"Articles","previous_headings":"Introduction","what":"Required packages","title":"Allometry database harmonization","text":"Assuming traits4models installed, load common packages employ vignette:","code":"library(traits4models) library(tidyverse) library(readr)"},{"path":"https://emf-creaf.github.io/traits4models/articles/AllometryDatabaseHarmonization.html","id":"example-dataset","dir":"Articles","previous_headings":"Introduction","what":"Example dataset","title":"Allometry database harmonization","text":"example allometric equations, use small compilation crown width models, different sources, depend diameter breast height: data looks follows:","code":"DB_path <- \"~/OneDrive/EMF_datasets/AllometryDatabases/\" db <- openxlsx::read.xlsx(paste0(DB_path, \"Sources/TreeAllometries/TreeAllometries.xlsx\"),                                  sheet= \"Tree_CW_models\") db ##                 Name      a_cw   b_cw                           Source ## 1         Abies alba 1.0963648 0.5380    Hasenauer (1997) - Abies alba ## 2               Acer 1.5189207 0.5285     Hasenauer (1997) - Acer spp. ## 3    Castanea sativa 1.3065630 0.5856             Condés & Sterba 2005 ## 4    Fagus sylvatica 0.8386180 0.7347             Condés & Sterba 2005 ## 5           Fraxinus 1.1951838 0.5665 Hasenauer (1997) - Fraxinus spp. ## 6   Pinus halepensis 0.6415296 0.7310             Condés & Sterba 2005 ## 7        Pinus nigra 0.5076312 0.7699             Condés & Sterba 2005 ## 8     Pinus pinaster 0.3889517 0.8307             Condés & Sterba 2005 ## 9      Pinus radiata 0.8418950 0.6353             Condés & Sterba 2005 ## 10  Pinus sylvestris 0.7474409 0.6716             Condés & Sterba 2005 ## 11     Quercus ilex  0.5681897 0.7974             Condés & Sterba 2005 ## 12 Quercus pyrenaica 0.7469926 0.7257             Condés & Sterba 2005 ## 13     Quercus robur 0.0716000 0.6563             Condés & Sterba 2005 ## 14     Quercus suber 0.4473000 0.7918     Sánchez-Gonzalez et al. 2007 ## 15             Pinus 0.7474409 0.6716                 Pinus sylvestris ## 16           Quercus 0.5681897 0.7974                           Q.ilex ## 17             Abies 1.0963648 0.5380                       Abies alba"},{"path":"https://emf-creaf.github.io/traits4models/articles/AllometryDatabaseHarmonization.html","id":"harmonizing-equations-and-notation","dir":"Articles","previous_headings":"","what":"Harmonizing equations and notation","title":"Allometry database harmonization","text":"allometric equation two parameters used estimate crown width diameter breast height (DBH). start harmonization subsetting necessary data: Importantly, allometry used, need specify equation: also add information response variable predictor variable: want traits4models correctly interpret allometric equation stage model parameter filling, important columns Equation Response appropriately filled. Note, addition, allometric equation starts name response left hand side equation. Finally, may add priority processing: database harmonizing allometry information looks follows:","code":"db_var <- db |>   dplyr::rename(originalName = \"Name\",                 a = \"a_cw\",                 b = \"b_cw\",                 Reference = \"Source\") db_var <- db_var |>   dplyr::mutate(Equation = \"CrownWidth = a·DBH^b\") db_var <- db_var |>                 dplyr::mutate(Response = \"CrownWidth\",                 ResponseDescription = \"Crown width (m)\",                 Predictor1 = \"DBH\",                 PredictorDescription1 = \"Diameter at breast height (cm)\") db_var <- db_var |>           dplyr::mutate(Priority = 1) |>           dplyr::relocate(Reference, .after = PredictorDescription1) db_var ##         originalName         a      b             Equation   Response ## 1         Abies alba 1.0963648 0.5380 CrownWidth = a·DBH^b CrownWidth ## 2               Acer 1.5189207 0.5285 CrownWidth = a·DBH^b CrownWidth ## 3    Castanea sativa 1.3065630 0.5856 CrownWidth = a·DBH^b CrownWidth ## 4    Fagus sylvatica 0.8386180 0.7347 CrownWidth = a·DBH^b CrownWidth ## 5           Fraxinus 1.1951838 0.5665 CrownWidth = a·DBH^b CrownWidth ## 6   Pinus halepensis 0.6415296 0.7310 CrownWidth = a·DBH^b CrownWidth ## 7        Pinus nigra 0.5076312 0.7699 CrownWidth = a·DBH^b CrownWidth ## 8     Pinus pinaster 0.3889517 0.8307 CrownWidth = a·DBH^b CrownWidth ## 9      Pinus radiata 0.8418950 0.6353 CrownWidth = a·DBH^b CrownWidth ## 10  Pinus sylvestris 0.7474409 0.6716 CrownWidth = a·DBH^b CrownWidth ## 11     Quercus ilex  0.5681897 0.7974 CrownWidth = a·DBH^b CrownWidth ## 12 Quercus pyrenaica 0.7469926 0.7257 CrownWidth = a·DBH^b CrownWidth ## 13     Quercus robur 0.0716000 0.6563 CrownWidth = a·DBH^b CrownWidth ## 14     Quercus suber 0.4473000 0.7918 CrownWidth = a·DBH^b CrownWidth ## 15             Pinus 0.7474409 0.6716 CrownWidth = a·DBH^b CrownWidth ## 16           Quercus 0.5681897 0.7974 CrownWidth = a·DBH^b CrownWidth ## 17             Abies 1.0963648 0.5380 CrownWidth = a·DBH^b CrownWidth ##    ResponseDescription Predictor1          PredictorDescription1 ## 1      Crown width (m)        DBH Diameter at breast height (cm) ## 2      Crown width (m)        DBH Diameter at breast height (cm) ## 3      Crown width (m)        DBH Diameter at breast height (cm) ## 4      Crown width (m)        DBH Diameter at breast height (cm) ## 5      Crown width (m)        DBH Diameter at breast height (cm) ## 6      Crown width (m)        DBH Diameter at breast height (cm) ## 7      Crown width (m)        DBH Diameter at breast height (cm) ## 8      Crown width (m)        DBH Diameter at breast height (cm) ## 9      Crown width (m)        DBH Diameter at breast height (cm) ## 10     Crown width (m)        DBH Diameter at breast height (cm) ## 11     Crown width (m)        DBH Diameter at breast height (cm) ## 12     Crown width (m)        DBH Diameter at breast height (cm) ## 13     Crown width (m)        DBH Diameter at breast height (cm) ## 14     Crown width (m)        DBH Diameter at breast height (cm) ## 15     Crown width (m)        DBH Diameter at breast height (cm) ## 16     Crown width (m)        DBH Diameter at breast height (cm) ## 17     Crown width (m)        DBH Diameter at breast height (cm) ##                           Reference Priority ## 1     Hasenauer (1997) - Abies alba        1 ## 2      Hasenauer (1997) - Acer spp.        1 ## 3              Condés & Sterba 2005        1 ## 4              Condés & Sterba 2005        1 ## 5  Hasenauer (1997) - Fraxinus spp.        1 ## 6              Condés & Sterba 2005        1 ## 7              Condés & Sterba 2005        1 ## 8              Condés & Sterba 2005        1 ## 9              Condés & Sterba 2005        1 ## 10             Condés & Sterba 2005        1 ## 11             Condés & Sterba 2005        1 ## 12             Condés & Sterba 2005        1 ## 13             Condés & Sterba 2005        1 ## 14     Sánchez-Gonzalez et al. 2007        1 ## 15                 Pinus sylvestris        1 ## 16                           Q.ilex        1 ## 17                       Abies alba        1"},{"path":"https://emf-creaf.github.io/traits4models/articles/AllometryDatabaseHarmonization.html","id":"taxonomic-harmonization","dir":"Articles","previous_headings":"","what":"Taxonomic harmonization","title":"Allometry database harmonization","text":"Package traits4models currently relies World Flora Online taxonomic harmonization, via package WorldFlora (Kindt 2020) available CRAN. latter package requires static copy World Flora Online Taxonomic Backbone data can downloaded World Flora Online website. Note use different DOI reference reporting harmonization procedures. using v.2024.06. assume user already downloaded backbone stored file called classification.csv. Taxonomic harmonization done calling function harmonize_taxonomy_WFO() data frame (notation units already harmonized) path WFO backbone (omit console output): function requires input data frame contains column called originalName, identify original taxa names (additional columns simply transferred output). performs direct fuzzy matching, may lead large processing time large datasets. inspect resulting data frame, see additional columns, informing accepted names parent taxonomic entities:","code":"WFO_file <- paste0(DB_path, \"../PlantTraitDatabases/WFO_Backbone/classification.csv\") db_post <- traits4models::harmonize_taxonomy_WFO(db_var, WFO_file) head(db_post) ##       originalName     acceptedName acceptedNameAuthorship      family    genus ## 1       Abies alba       Abies alba                  Mill.    Pinaceae    Abies ## 2             Acer             Acer                     L. Sapindaceae     Acer ## 3  Castanea sativa  Castanea sativa                  Mill.    Fagaceae Castanea ## 4  Fagus sylvatica  Fagus sylvatica                     L.    Fagaceae    Fagus ## 5         Fraxinus         Fraxinus           Tourn. ex L.    Oleaceae Fraxinus ## 6 Pinus halepensis Pinus halepensis                  Mill.    Pinaceae    Pinus ##   specificEpithet taxonRank         a      b             Equation   Response ## 1            alba   species 1.0963648 0.5380 CrownWidth = a·DBH^b CrownWidth ## 2            <NA>     genus 1.5189207 0.5285 CrownWidth = a·DBH^b CrownWidth ## 3          sativa   species 1.3065630 0.5856 CrownWidth = a·DBH^b CrownWidth ## 4       sylvatica   species 0.8386180 0.7347 CrownWidth = a·DBH^b CrownWidth ## 5            <NA>     genus 1.1951838 0.5665 CrownWidth = a·DBH^b CrownWidth ## 6      halepensis   species 0.6415296 0.7310 CrownWidth = a·DBH^b CrownWidth ##   ResponseDescription Predictor1          PredictorDescription1 ## 1     Crown width (m)        DBH Diameter at breast height (cm) ## 2     Crown width (m)        DBH Diameter at breast height (cm) ## 3     Crown width (m)        DBH Diameter at breast height (cm) ## 4     Crown width (m)        DBH Diameter at breast height (cm) ## 5     Crown width (m)        DBH Diameter at breast height (cm) ## 6     Crown width (m)        DBH Diameter at breast height (cm) ##                          Reference Priority ## 1    Hasenauer (1997) - Abies alba        1 ## 2     Hasenauer (1997) - Acer spp.        1 ## 3             Condés & Sterba 2005        1 ## 4             Condés & Sterba 2005        1 ## 5 Hasenauer (1997) - Fraxinus spp.        1 ## 6             Condés & Sterba 2005        1"},{"path":"https://emf-creaf.github.io/traits4models/articles/AllometryDatabaseHarmonization.html","id":"checking-harmonized-allometry-data","dir":"Articles","previous_headings":"","what":"Checking harmonized allometry data","title":"Allometry database harmonization","text":"packages includes function check_harmonized_allometry() check whether given data frame conforms structure content later required parameter table filling: case, data set ready used parameter estimation. example, can run checking function data base taxonomic harmonization:","code":"check_harmonized_allometry(db_post) ## ✔ The data frame is acceptable as harmonized allometry data source. check_harmonized_allometry(db_var) ## ! Required columns missing: acceptedName acceptedNameAuthorship family genus specificEpithet taxonRank ## ! The data frame is not acceptable as harmonized allometry data source."},{"path":"https://emf-creaf.github.io/traits4models/articles/AllometryDatabaseHarmonization.html","id":"storing-harmonized-dataset","dir":"Articles","previous_headings":"","what":"Storing harmonized dataset","title":"Allometry database harmonization","text":"Harmonized data tables can stored .csv text format compressed .rds format. Note tables stored directory, Products/harmonized/ path, populate model parameters.","code":"write.csv2(db_post, \"Products/harmonized/tree_crown_width_europe.csv\", row.names = FALSE)"},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/articles/AllometryDatabaseHarmonization.html","id":"list-of-harmonized-allometry-databases","dir":"Articles","previous_headings":"Accessing harmonized allometry data","what":"List of harmonized allometry databases","title":"Allometry database harmonization","text":"mentioned introduction, assumed set plant allometry databases harmonized. case, harmonized data files stored following path: can list set harmonized sources using:","code":"harmonized_allometry_path = \"~/OneDrive/EMF_datasets/AllometryDatabases/Products/harmonized\" allometry_files <- list.files(path = harmonized_allometry_path, full.names = FALSE) allometry_files ##  [1] \"shrub_crown_area_catalonia.csv\"                   ##  [2] \"shrub_fine_fuel_biomass_catalonia.csv\"            ##  [3] \"shrub_total_biomass_catalonia.csv\"                ##  [4] \"tree_bark_thickness_catalonia.csv\"                ##  [5] \"tree_crown_ratio_europe.csv\"                      ##  [6] \"tree_crown_width_europe.csv\"                      ##  [7] \"tree_foliar_biomass_calvoalvarado_et_al_2024.csv\" ##  [8] \"tree_foliar_biomass_catalonia.csv\"                ##  [9] \"tree_foliar_biomass_eslamdoust_et_al_2017.csv\"    ## [10] \"tree_foliar_biomass_thom_et_al_2024.csv\""},{"path":"https://emf-creaf.github.io/traits4models/articles/AllometryDatabaseHarmonization.html","id":"querying-allometry-data-for-particular-response-variable","dir":"Articles","previous_headings":"Accessing harmonized allometry data","what":"Querying allometry data for particular response variable","title":"Allometry database harmonization","text":"filling species parameter table, may useful inspect amount information available particular response. Package trait4models provides function get_allometry_data():","code":"fb_data <- get_allometry_data(harmonized_allometry_path, \"FoliarBiomass\",                               progress = FALSE) head(fb_data) ##              originalName           acceptedName acceptedNameAuthorship ## 1 Tetragastris panamensis    Protium stevensonii         (Standl.) Daly ## 2         Virola koschnii        Virola koschnyi                  Warb. ## 3       Carapa guianensis      Carapa guianensis                  Aubl. ## 4     Vochysia ferruginea    Vochysia ferruginea                  Mart. ## 5  Pentaclethra macroloba Pentaclethra macroloba        (Willd.) Kuntze ## 6              Abies alba             Abies alba                  Mill. ##          family        genus specificEpithet taxonRank ## 1   Burseraceae      Protium     stevensonii   species ## 2 Myristicaceae       Virola        koschnyi   species ## 3     Meliaceae       Carapa      guianensis   species ## 4  Vochysiaceae     Vochysia      ferruginea   species ## 5      Fabaceae Pentaclethra       macroloba   species ## 6      Pinaceae        Abies            alba   species ##                                         Equation         a        b ## 1                        FoliarBiomass = a·DBH^b 0.0400000 1.737000 ## 2                        FoliarBiomass = a·DBH^b 0.0020000 2.468000 ## 3                        FoliarBiomass = a·DBH^b 0.0120000 2.089000 ## 4                        FoliarBiomass = a·DBH^b 0.6730000 1.058000 ## 5                        FoliarBiomass = a·DBH^b 0.9580000 0.757000 ## 6 FoliarBiomass = a·DBH^b·exp(c·BAL)·DBH^(d·BAL) 0.1231138 1.452404 ##                                                                                                                                                                                                  Reference ## 1 Calvo-Alvarado et al. (2008) Allometric relationships predicting foliar biomass and leaf area:sapwood area ratio from tree height in five Costa Rican rain forest species. Tree Physiology 28: 1601-1608 ## 2 Calvo-Alvarado et al. (2008) Allometric relationships predicting foliar biomass and leaf area:sapwood area ratio from tree height in five Costa Rican rain forest species. Tree Physiology 28: 1601-1608 ## 3 Calvo-Alvarado et al. (2008) Allometric relationships predicting foliar biomass and leaf area:sapwood area ratio from tree height in five Costa Rican rain forest species. Tree Physiology 28: 1601-1608 ## 4 Calvo-Alvarado et al. (2008) Allometric relationships predicting foliar biomass and leaf area:sapwood area ratio from tree height in five Costa Rican rain forest species. Tree Physiology 28: 1601-1608 ## 5 Calvo-Alvarado et al. (2008) Allometric relationships predicting foliar biomass and leaf area:sapwood area ratio from tree height in five Costa Rican rain forest species. Tree Physiology 28: 1601-1608 ## 6                                                                                                                                                                                          Calculated IEFC ##        Response ResponseDescription Predictor1          PredictorDescription1 ## 1 FoliarBiomass Foliar biomass (kg)        DBH Diameter at breast height (cm) ## 2 FoliarBiomass Foliar biomass (kg)        DBH Diameter at breast height (cm) ## 3 FoliarBiomass Foliar biomass (kg)        DBH Diameter at breast height (cm) ## 4 FoliarBiomass Foliar biomass (kg)        DBH Diameter at breast height (cm) ## 5 FoliarBiomass Foliar biomass (kg)        DBH Diameter at breast height (cm) ## 6 FoliarBiomass Foliar biomass (kg)        DBH Diameter at breast height (cm) ##   Priority  c  d Predictor2              PredictorDescription2 ## 1        2 NA NA       <NA>                               <NA> ## 2        2 NA NA       <NA>                               <NA> ## 3        2 NA NA       <NA>                               <NA> ## 4        2 NA NA       <NA>                               <NA> ## 5        2 NA NA       <NA>                               <NA> ## 6        1  0  0        BAL Basal area of larger trees (m2/ha)"},{"path":[]},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"aim","dir":"Articles","previous_headings":"Introduction","what":"Aim","title":"Building species parameter tables for medfate","text":"vignette describes procedures used create fill species parameter data tables (SpParamsES, SpParamsFR SpParamsUS included package traits4models) simulations packages medfate medfateland. assumed set plant trait allometry databases harmonized used source data parameter estimation (see vignettes [Trait database haramonization](https://emf-creaf.github.io/traits4models/articles/TraitDatabaseHarmonization.html Allometry database haramonization. IMPORTANT: vignette self-contained, sense reproduced without access data sets included. Nevertheless, intended serve example species parameterization regions.","code":""},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"required-packages","dir":"Articles","previous_headings":"Introduction","what":"Required packages","title":"Building species parameter tables for medfate","text":"Assuming medfate traits4models correctly installed, load common packages employ vignette:","code":"library(medfate) library(traits4models) library(tidyverse) library(openxlsx) library(sf)"},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"target-parameters","dir":"Articles","previous_headings":"Introduction","what":"Target parameters","title":"Building species parameter tables for medfate","text":"set species parameters needed run models included medfate described data frame called SpParamsDefinition included package. obvious medfate requires sheer number parameters searched manually, even small number target species. Hence, important draw values plant allometry plant trait data bases. model parameters counterpart publicly-available databases, even using data bases unlikely one find appropriate parameter values species. help situation, medfate inbuilt imputation procedures estimate missing values many parameters starting model simulations. However, imputed parameter estimates normally worse estimates coming data bases. Hence, process-based model users put strong effort finding source parameter data starting simulations.","code":""},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"steps-to-build-a-species-parameter-table","dir":"Articles","previous_headings":"Introduction","what":"Steps to build a species parameter table","title":"Building species parameter tables for medfate","text":"following sections describe different steps used obtain species parameter table, can grouped six main steps: remainder vignette illustrates steps.","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"target-taxonomic-entities","dir":"Articles","previous_headings":"Initializing a species parameter table","what":"Target taxonomic entities","title":"Building species parameter tables for medfate","text":"species parameter table medfate starts vector species names. , assume names correspond taxa (genus, species, subspecies, …) mentioned national forest inventory, specifically Spanish National Forest Inventory (SFI). Note taxon names forest inventory correspond concepts taxonomic reference. Hence, important harmonize taxonomy reference used traits4models, .e. World Flora Online, function harmonize_taxonomy_WFO() may useful. assume harmonization conducted SFI taxon list included external data package: NFIName corresponds name used Spanish forest inventory, originalName contains names used taxonomy harmonization function harmonize_taxonomy_WFO(), acceptedName corresponds accepted name according World Flora Online. Column originalName values NFIName scientific taxa, otherwise missing. Non-scientific plant names (e.g. ‘Cultivated trees’, ‘conifers’) taxa names identified used medfate simulations matched plant trait data. Normally, need filter names using:","code":"file <- system.file(\"extdata\", \"NFI_ES_mapping.csv\", package = \"traits4models\") NFI_ES_mapping <- read.table(file, sep=\";\", header=TRUE, na.strings = \"\") |>   tibble::as_tibble() |>   dplyr::mutate(NFICode = as.character(NFICode)) NFI_ES_mapping ## # A tibble: 480 × 10 ##    NFICode NFIName             originalName  originalNameAuthorship acceptedName ##    <chr>   <chr>               <chr>         <chr>                  <chr>        ##  1 31      Abies alba          Abies alba    Mill.                  Abies alba   ##  2 32      Abies pinsapo       Abies pinsapo Boiss.                 Abies pinsa… ##  3 307     Acacia dealbata     Acacia dealb… Link                   Acacia deal… ##  4 207     Acacia melanoxylon  Acacia melan… R.Br. in W.T.Aiton     Acacia mela… ##  5 7       Acacia spp.         Acacia        NA                     Acacia       ##  6 76      Acer campestre      Acer campest… L.                     Acer campes… ##  7 276     Acer monspessulanum Acer monspes… L.                     Acer monspe… ##  8 376     Acer negundo        Acer negundo  L.                     Acer negundo ##  9 476     Acer opalus         Acer opalus   Mill.                  Acer opalus  ## 10 676     Acer platanoides    Acer platano… L.                     Acer platan… ## # ℹ 470 more rows ## # ℹ 5 more variables: acceptedNameAuthorship <chr>, family <chr>, genus <chr>, ## #   specificEpithet <chr>, taxonRank <chr> spp_filt <- NFI_ES_mapping |>   dplyr::filter(!is.na(acceptedName))"},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"initialization","dir":"Articles","previous_headings":"Initializing a species parameter table","what":"Initialization","title":"Building species parameter tables for medfate","text":"Package traits4models provides function init_medfate_params() initialize species parameter table medfate according names given data frame taxonomic information, NFI_ES_mapping. Column originalName used match Species names forest objects derived Spanish forest inventory, column acceptedName used ensure matching trait information done using appropriate (harmonized) taxonomic nomenclature. columns used fill taxonomy: result empty data frame, except first columns, correspond taxonomic hierarchy entity (genus, family, group, …), taxonomic information lower rank (family) comes input data frame; higher rank (order, group) completed using internal package data obtained package taxize. number rows output data frame can larger input, default function creates additional rows species (sub-species species cited) genus (species genus cited).","code":"SpParams <- traits4models::init_medfate_params(spp_filt,                                                verbose = FALSE) SpParams |> tibble::as_tibble() ## # A tibble: 548 × 154 ##    Name         SpIndex AcceptedName Species Genus Family Order Group GrowthForm ##    <chr>          <int> <chr>        <chr>   <chr> <chr>  <chr> <chr> <lgl>      ##  1 Abies              0 Abies        NA      Abies Pinac… Pina… Gymn… NA         ##  2 Abies alba         1 Abies alba   Abies … Abies Pinac… Pina… Gymn… NA         ##  3 Abies pinsa…       2 Abies pinsa… Abies … Abies Pinac… Pina… Gymn… NA         ##  4 Acacia             3 Acacia       Acacia  Acac… Fabac… Faba… Angi… NA         ##  5 Acacia deal…       4 Acacia deal… Acacia… Acac… Fabac… Faba… Angi… NA         ##  6 Acacia mela…       5 Acacia mela… Acacia… Acac… Fabac… Faba… Angi… NA         ##  7 Acer               6 Acer         Acer    Acer  Sapin… Sapi… Angi… NA         ##  8 Acer               7 Acer         Acer    Acer  Sapin… Sapi… Angi… NA         ##  9 Acer campes…       8 Acer campes… Acer c… Acer  Sapin… Sapi… Angi… NA         ## 10 Acer monspe…       9 Acer monspe… Acer m… Acer  Sapin… Sapi… Angi… NA         ## # ℹ 538 more rows ## # ℹ 145 more variables: LifeForm <lgl>, LeafShape <lgl>, LeafSize <lgl>, ## #   PhenologyType <lgl>, DispersalType <lgl>, Hmed <lgl>, Hmax <lgl>, ## #   Z50 <lgl>, Z95 <lgl>, fHDmin <lgl>, fHDmax <lgl>, a_ash <lgl>, b_ash <lgl>, ## #   a_bsh <lgl>, b_bsh <lgl>, a_btsh <lgl>, b_btsh <lgl>, cr <lgl>, BTsh <lgl>, ## #   a_fbt <lgl>, b_fbt <lgl>, c_fbt <lgl>, a_cr <lgl>, b_1cr <lgl>, ## #   b_2cr <lgl>, b_3cr <lgl>, c_1cr <lgl>, c_2cr <lgl>, a_cw <lgl>, …"},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"filling-structural-parameters-from-forest-inventory-data","dir":"Articles","previous_headings":"","what":"Filling structural parameters from forest inventory data","title":"Building species parameter tables for medfate","text":"species parameters can withdrawn data target forest inventory simulations conducted. load data frame (actually sf object) containing data Third Spanish Forest Inventory: Column forest contains forest inventory plots used withdraw parameters. example, second forest object : traits4models provides function fill_medfate_inventory_traits() perform parameter extraction: Species matching performed column Species tree shrub data tables Name species parameter table; following information extracted: GrowthForm: Growth form according usage forest inventory. example, species cited treeData tables shrubData tables, growth form \"Tree\". Hmax: Maximum tree/shrub height (cm), according Height column treeData shrubData quantile_Hmax parameter. Hmed: Median tree/shrub height (cm), according Height column treeData shrubData quantile_Hmed parameter. fHDmin, fHDmax: Minimum maximum height diameter ratio trees, according Height DBH columns treeData quantile_fHDmin quantile_fHDmax parameters, respectively.","code":"sf_IFN3 <- readRDS(\"~/OneDrive/mcaceres_work/model_initialisation/medfate_initialisation/IFN/Products/SpParamsES/IFN3/soilmod/IFN3_spain_soilmod_WGS84.rds\") sf_IFN3 ## Simple feature collection with 98996 features and 10 fields ## Geometry type: POINT ## Dimension:     XY ## Bounding box:  xmin: -18.13626 ymin: 27.70124 xmax: 4.29737 ymax: 43.7617 ## Geodetic CRS:  WGS 84 ## # A tibble: 98,996 × 11 ##    id                         geometry  year plot  country version forest       ##  * <chr>                   <POINT [°]> <int> <chr> <chr>   <chr>   <list>       ##  1 01_0001_xx_A4… (-3.024625 43.21778)  2005 0001  ES      ifn3    <forest [5]> ##  2 01_0002_xx_A4… (-3.024621 43.20878)  2005 0002  ES      ifn3    <forest [5]> ##  3 01_0003_NN_A3… (-3.012307 43.19077)  2005 0003  ES      ifn3    <forest [5]> ##  4 01_0003_xx_A3… (-3.012307 43.19077)  2005 0003  ES      ifn3    <forest [5]> ##  5 01_0004_NN_A3…        (-3 43.19077)  2005 0004  ES      ifn3    <forest [5]> ##  6 01_0004_xx_A3…        (-3 43.19077)  2005 0004  ES      ifn3    <forest [5]> ##  7 01_0005_NN_A1… (-2.988971 43.18907)  2005 0005  ES      ifn3    <forest [5]> ##  8 01_0006_NN_A1… (-2.975386 43.19077)  2005 0006  ES      ifn3    <forest [5]> ##  9 01_0007_xx_A4… (-2.987695 43.18177)  2005 0007  ES      ifn3    <forest [5]> ## 10 01_0008_xx_A4…  (-2.97539 43.18176)  2005 0008  ES      ifn3    <forest [5]> ## # ℹ 98,986 more rows ## # ℹ 4 more variables: elevation <dbl>, slope <dbl>, aspect <dbl>, soil <list> sf_IFN3$forest[[2]] ## $treeData ## # A tibble: 29 × 9 ##    Species       SpeciesCode   DBH Height     N   Z50   Z95 tree_ifn2 tree_ifn3 ##    <chr>         <chr>       <dbl>  <dbl> <dbl> <dbl> <dbl>     <int>     <int> ##  1 Pinus radiata 28           12.0   1000 127.     NA    NA         0         1 ##  2 Pinus radiata 28           12.6   1050  31.8    NA    NA         0         2 ##  3 Pinus radiata 28           17.0   1050  31.8    NA    NA         0         3 ##  4 Pinus radiata 28           16.2   1100  31.8    NA    NA         0         4 ##  5 Pinus radiata 28           17.2   1050  31.8    NA    NA         0         5 ##  6 Pinus radiata 28           17.0   1150  31.8    NA    NA         0         6 ##  7 Pinus radiata 28           14.4   1000  31.8    NA    NA         0         7 ##  8 Pinus radiata 28           10.8   1000 127.     NA    NA         0         8 ##  9 Pinus radiata 28           20.5   1100  31.8    NA    NA         0         9 ## 10 Pinus radiata 28           13.2   1000  31.8    NA    NA         0        10 ## # ℹ 19 more rows ##  ## $shrubData ## # A tibble: 5 × 6 ##   Species             SpeciesCode Height Cover   Z50   Z95 ##   <chr>               <chr>        <dbl> <dbl> <dbl> <dbl> ## 1 Ulex spp.           1103           100     2    NA    NA ## 2 Daboecia cantabrica 120             30     2    NA    NA ## 3 Rubus ulmifolius    3121           150     5    NA    NA ## 4 Erica cinerea       5102           150     2    NA    NA ## 5 Cistus salviifolius 6101            20     1    NA    NA ##  ## $herbCover ## [1] NA ##  ## $herbHeight ## [1] NA ##  ## $seedBank ## [1] Species Percent ## <0 rows> (or 0-length row.names) ##  ## attr(,\"class\") ## [1] \"forest\" \"list\" SpParams<- traits4models::fill_medfate_inventory_traits(SpParams, sf_IFN3,                                                          progress = FALSE)"},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"filling-allometric-coefficients","dir":"Articles","previous_headings":"","what":"Filling allometric coefficients","title":"Building species parameter tables for medfate","text":"mentioned introduction, assumed set plant allometry databases harmonized. case, harmonized data files stored .rds .csv files following path: Function fill_medfate_allometries() performs trait parameter filling medfate using available data:","code":"harmonized_allometry_path = \"~/OneDrive/EMF_datasets/AllometryDatabases/Products/harmonized\" SpParams<- traits4models::fill_medfate_allometries(SpParams,                                                     harmonized_allometry_path,                                                     progress = TRUE, verbose = FALSE) ## ℹ Processing response: FoliarBiomass ## ✔ Processing response: FoliarBiomass [32ms] ## ## ℹ Processing response: CrownRatio ## ✔ Processing response: CrownRatio [43ms] ## ## ℹ Processing response: CrownWidth ## ✔ Processing response: CrownWidth [26ms] ## ## ℹ Processing response: BarkThickness ## ✔ Processing response: BarkThickness [18ms] ## ## ℹ Processing response: CrownArea ## ✔ Processing response: CrownArea [17ms] ## ## ℹ Processing response: FineFuelBiomass ## ✔ Processing response: FineFuelBiomass [19ms] ## ## ℹ Processing response: TotalBiomass ## ✔ Processing response: TotalBiomass [18ms] ##"},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"filling-parameters-from-harmonized-trait-databases","dir":"Articles","previous_headings":"","what":"Filling parameters from harmonized trait databases","title":"Building species parameter tables for medfate","text":"mentioned introduction, assumed set plant trait databases harmonized. case, harmonized data files stored .rds .csv files following path: Function fill_medfate_traits() performs trait parameter filling medfate using available data: Parameter filling sometimes implies translating trait data units required model parameters. function identifies row species parameter table modify matching column AcceptedName SpParams column acceptedName harmonized trait data sources. multiple values given species available, function takes median value (quantitative traits) mode (.e. frequent value; qualitative traits). addition, data sources higher priority processed first. Thus, data sources lower priority used cases covered prioritized sources.","code":"harmonized_trait_path <- \"~/OneDrive/EMF_datasets/PlantTraitDatabases/Products/harmonized\" SpParams<- traits4models::fill_medfate_traits(SpParams, harmonized_trait_path,                                                progress = FALSE, verbose = FALSE) ## Warning in get_trait_data(harmonized_trait_path, trait_name, is_numeric = TRUE, ## : NAs introduced by coercion"},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"checking-species-parameter-tables","dir":"Articles","previous_headings":"","what":"Checking species parameter tables","title":"Building species parameter tables for medfate","text":"using given species parameter table, important verify table contain missing values key parameters. medfate, parameters always required non-missing values called Strict (see SpParamsDefinition package medfate). Function check_medfate_params() checks, among things, strict parameters contain missing values: Normally, information plant trait data bases contain information species strict parameters, even qualitative traits. problem raised check_medfate_params() must addressed.","code":"check_medfate_params(SpParams) ## ! Strict parameter column 'GrowthForm' should not contain any missing value. ## ! Strict parameter column 'LifeForm' should not contain any missing value. ## ! Strict parameter column 'LeafShape' should not contain any missing value. ## ! Strict parameter column 'LeafSize' should not contain any missing value. ## ! Strict parameter column 'PhenologyType' should not contain any missing value. ## ! Strict parameter column 'DispersalType' should not contain any missing value. ## ! Strict parameter column 'Hmed' should not contain any missing value. ## ! Strict parameter column 'Hmax' should not contain any missing value. ## ! Strict parameter column 'Z95' should not contain any missing value."},{"path":"https://emf-creaf.github.io/traits4models/articles/SpeciesParameterizationMEDFATE.html","id":"completing-strict-parameters","dir":"Articles","previous_headings":"","what":"Completing strict parameters","title":"Building species parameter tables for medfate","text":"Package trait4models includes function complete_medfate_strict() perform imputation strict parameters, result table can used simulations. Imputation performed basis available information similar taxa. Taxonomically closer entities given priority higher order taxa (.e. species genus priorized sources searching species family): completion strict paratemers, species parameter table pass previous check: can store table use model simulations.","code":"SpParams <- traits4models::complete_medfate_strict(SpParams, progress = FALSE) check_medfate_params(SpParams) ## ✔ The data frame is acceptable as species parameter table for medfate."},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/articles/TraitDatabaseHarmonization.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Trait database harmonization","text":"Species parameter values drawn single data source. Moreover, availability plant trait data continuously increases, additional efforts made observational experimental studies (Kattge et al. 2020). means multiple data sources need harmonized species parameter tables build, terms : result harmonization needs stored harmonized format subsequent use creating species parameter tables. vignette illustrates harmonization procedures example data set using package trait4models usual tidyverse packages. Harmonization allometric equations explained companion vignette. IMPORTANT: vignette self-contained, sense reproduced without access data sets included. Nevertheless, intended serve example species parameterization regions.","code":"a) Nomenclature of measured variables. b) Measurement units. c) Taxonomy of the measured biological entities."},{"path":"https://emf-creaf.github.io/traits4models/articles/TraitDatabaseHarmonization.html","id":"required-packages","dir":"Articles","previous_headings":"Introduction","what":"Required packages","title":"Trait database harmonization","text":"Assuming traits4models installed, load common packages employ vignette:","code":"library(traits4models) library(tidyverse) library(readr)"},{"path":"https://emf-creaf.github.io/traits4models/articles/TraitDatabaseHarmonization.html","id":"example-dataset","dir":"Articles","previous_headings":"Introduction","what":"Example dataset","title":"Trait database harmonization","text":"example harmonization process, use data Bartlett et al. (2016). Much larger data sets can () processed, take much time. Bartlett et al. provide traits describe leaf/stem/root hydraulic vulnerability curves several species well water potential corresponding stomatal aperture. start loading dataset: data looks follows:","code":"DB_path <- \"~/OneDrive/EMF_datasets/PlantTraitDatabases/\" db <- readr::read_csv(paste0(DB_path, \"Sources/Bartlett_et_al_2016/pnas.1604088113.sd01.csv\")) db ## # A tibble: 310 × 26 ##    Group      Name          Biome `Evergreen/Decid` `Leaf P50 (MPa)` `TLP (MPa)` ##    <chr>      <chr>         <chr> <chr>                        <dbl>       <dbl> ##  1 Angiosperm Acacia gregg… Semi… E                            NA          -4.25 ##  2 Angiosperm Acer campest… Temp… D                            -1.32       -1.9  ##  3 Angiosperm Acer grandid… Temp… D                            NA          -2.45 ##  4 Angiosperm Acer monspes… Med.… D                            -1.89       -2.2  ##  5 Angiosperm Acer negundo  Temp… D                            NA          -1.59 ##  6 Angiosperm Acer pseudop… Temp… D                            -1.19       -1.4  ##  7 Angiosperm Acer rubrum   Temp… D                            -1.7        -1.59 ##  8 Angiosperm Acer sacchar… Temp… D                            NA          -2.78 ##  9 Angiosperm Adansonia ru… Trop… D                            NA          -1.12 ## 10 Angiosperm Adansonia za  Trop… D                            NA          -1.26 ## # ℹ 300 more rows ## # ℹ 20 more variables: `Stem P50 (MPa)` <dbl>, `Stem P88 (MPa)` <dbl>, ## #   `Stem P12 (MPa)` <dbl>, `Root P50 (MPa)` <dbl>, `Gs P50 (MPa)` <dbl>, ## #   `Gs 95 (MPa)` <dbl>, `plant Psi_lethal (MPa)` <dbl>, ## #   `Psimin_predawn (MPa)` <dbl>, `Psimin_midday (MPa)` <dbl>, ## #   `Psimin_midday and/or predawn Method` <chr>, ## #   `Reference (for Leaf P50)` <chr>, `Reference (for TLP)` <chr>, …"},{"path":"https://emf-creaf.github.io/traits4models/articles/TraitDatabaseHarmonization.html","id":"harmonizing-notation-and-measurement-units","dir":"Articles","previous_headings":"","what":"Harmonizing notation and measurement units","title":"Trait database harmonization","text":"first steps done harmonize trait notation, .e. plant traits referred , necessary, change units. Package traits4models includes data table called HarmonizedTraitDefinition presents plant trait definitions required notation units: case Bartlett’s dataset interested points vulnerability curve stomatal behavior. can check corresponding names HarmonizedTraitDefinition. example, Leaf P50 (MPa) water potential corresponding 50% conductance loss leaves, named VCleaf_P50 according HarmonizedTraitDefinition, . can use dplyr function rename() harmonize trait notation. case, plant traits interested given units MPa, HarmonizedTraitDefinition reports units traits, need harmonize measurement units. code notation harmonization follows: Note also renamed column containing plant species originalName. original name represents taxon name used data set owner/provider key taxonomic harmonization. result step contain originalName, plus one column harmonized trait, (preferably) two columns called Reference Priority. can add columns manually using: Column Reference indicates bibliographic source data, whereas Priority allows defining order trait data sources processed. highest priority order (lowest value Priority) given preference.","code":"db_var <- db |>   dplyr::select(Name, \"Leaf P50 (MPa)\", \"Stem P50 (MPa)\", \"Stem P88 (MPa)\", \"Stem P12 (MPa)\",                  \"Root P50 (MPa)\", \"Gs P50 (MPa)\", \"Gs 95 (MPa)\") |>   dplyr::rename(originalName = Name,                 VCleaf_P50 = \"Leaf P50 (MPa)\",                 VCstem_P50 = \"Stem P50 (MPa)\",                 VCstem_P12 = \"Stem P12 (MPa)\",                 VCstem_P88 = \"Stem P88 (MPa)\",                 VCroot_P50 = \"Root P50 (MPa)\",                 Gs_P50 = \"Gs P50 (MPa)\",                 Gs_P95 = \"Gs 95 (MPa)\") db_var <- db_var |>   dplyr::mutate(Reference = \"Bartlett et al. (2016)\",                 Priority = 3) db_var ## # A tibble: 310 × 10 ##    originalName    VCleaf_P50 VCstem_P50 VCstem_P88 VCstem_P12 VCroot_P50 Gs_P50 ##    <chr>                <dbl>      <dbl>      <dbl>      <dbl>      <dbl>  <dbl> ##  1 Acacia greggii       NA         NA         NA        NA          NA     NA    ##  2 Acer campestre       -1.32      -3.87      -4.60     -3.19       NA     NA    ##  3 Acer grandiden…      NA         -3.66      -7.14     -0.92       -0.86  NA    ##  4 Acer monspessu…      -1.89      -3.31      -4.61     -2.02       -1.6   NA    ##  5 Acer negundo         NA         -1.34      -2.74     -0.451      -0.3   NA    ##  6 Acer pseudopla…      -1.19      -2.37      -2.71     -1.95       NA     NA    ##  7 Acer rubrum          -1.7       -3.9       -6        -2.5        -1.69  NA    ##  8 Acer saccharum       NA         -3.97      NA        NA          -1.5   -1.56 ##  9 Adansonia rubr…      NA         -1.1       -2.82     -0.293      NA     NA    ## 10 Adansonia za         NA         -1.7       -3.49     -0.59       NA     NA    ## # ℹ 300 more rows ## # ℹ 3 more variables: Gs_P95 <dbl>, Reference <chr>, Priority <dbl>"},{"path":"https://emf-creaf.github.io/traits4models/articles/TraitDatabaseHarmonization.html","id":"taxonomic-harmonization","dir":"Articles","previous_headings":"","what":"Taxonomic harmonization","title":"Trait database harmonization","text":"Package traits4models currently relies World Flora Online taxonomic harmonization, via package WorldFlora (Kindt 2020) available CRAN. latter package requires static copy World Flora Online Taxonomic Backbone data can downloaded World Flora Online website. Note use different DOI reference reporting harmonization procedures. using v.2024.06. assume user already downloaded backbone stored file called classification.csv. Taxonomic harmonization done calling function harmonize_taxonomy_WFO() data frame (notation units already harmonized) path WFO backbone (omit console output): function requires input data frame contains column called originalName, identify original taxa names (additional columns simply transferred output). performs direct fuzzy matching, may lead large processing time large datasets. inspect resulting data frame, see additional columns, informing accepted names parent taxonomic entities:","code":"WFO_file <- paste0(DB_path, \"WFO_Backbone/classification.csv\") db_post <- traits4models::harmonize_taxonomy_WFO(db_var, WFO_file) head(db_post) ## # A tibble: 6 × 16 ##   originalName  acceptedName acceptedNameAuthorship family genus specificEpithet ##   <chr>         <chr>        <chr>                  <chr>  <chr> <chr>           ## 1 Acacia gregg… Senegalia g… (A.Gray) Britton & Ro… Fabac… Sene… greggii         ## 2 Acer campest… Acer campes… L.                     Sapin… Acer  campestre       ## 3 Acer grandid… Acer saccha… (Nutt.) Desmarais      Sapin… Acer  saccharum       ## 4 Acer monspes… Acer monspe… L.                     Sapin… Acer  monspessulanum  ## 5 Acer negundo  Acer negundo L.                     Sapin… Acer  negundo         ## 6 Acer pseudop… Acer pseudo… L.                     Sapin… Acer  pseudoplatanus  ## # ℹ 10 more variables: taxonRank <chr>, VCleaf_P50 <dbl>, VCstem_P50 <dbl>, ## #   VCstem_P88 <dbl>, VCstem_P12 <dbl>, VCroot_P50 <dbl>, Gs_P50 <dbl>, ## #   Gs_P95 <dbl>, Reference <chr>, Priority <dbl>"},{"path":"https://emf-creaf.github.io/traits4models/articles/TraitDatabaseHarmonization.html","id":"checking-harmonized-trait-data","dir":"Articles","previous_headings":"","what":"Checking harmonized trait data","title":"Trait database harmonization","text":"packages includes function check_harmonized_trait() check whether given data frame conforms structure content later required parameter table filling: case, data set ready used parameter estimation. example, can run checking function data base taxonomic harmonization:","code":"check_harmonized_trait(db_post) ## ✔ The data frame is acceptable as harmonized trait data source. check_harmonized_trait(db_var) ## ! Taxonomy columns missing: acceptedName acceptedNameAuthorship family genus specificEpithet taxonRank ## ! The data frame is not acceptable as harmonized trait data source."},{"path":"https://emf-creaf.github.io/traits4models/articles/TraitDatabaseHarmonization.html","id":"storing-harmonized-dataset","dir":"Articles","previous_headings":"","what":"Storing harmonized dataset","title":"Trait database harmonization","text":"Harmonized data tables can stored .csv text format compressed .rds format. Moreover, tables stored directory, Products/harmonized/ path.","code":"file_out <- paste0(DB_path, \"Products/harmonized/Bartlett_et_al_2016.rds\") saveRDS(db_post, file_out)"},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/articles/TraitDatabaseHarmonization.html","id":"list-of-harmonized-trait-databases","dir":"Articles","previous_headings":"Accessing harmonized trait data","what":"List of harmonized trait databases","title":"Trait database harmonization","text":"mentioned introduction, assumed set plant trait databases harmonized. case, harmonized data files stored following path: can list set harmonized sources using:","code":"harmonized_trait_path <- \"~/OneDrive/EMF_datasets/PlantTraitDatabases/Products/harmonized\" trait_files <- list.files(path = harmonized_trait_path, full.names = FALSE) trait_files ##   [1] \"00_compilation_CCfineroot.rds\"                           ##   [2] \"00_compilation_CCleaf.rds\"                               ##   [3] \"00_compilation_CCsapwood.rds\"                            ##   [4] \"00_compilation_FineFuelRatio.rds\"                        ##   [5] \"00_compilation_Flammability_HeatContent.rds\"             ##   [6] \"00_compilation_Flammability_SAV.rds\"                     ##   [7] \"00_compilation_Phenology_Budburst.rds\"                   ##   [8] \"00_compilation_Phenology_Senescence.rds\"                 ##   [9] \"Augustine_McCulloh_2024.rds\"                             ##  [10] \"Baez_et_al_2022_BarkThickness.rds\"                       ##  [11] \"Baez_et_al_2022_GrowthForm.rds\"                          ##  [12] \"Baez_et_al_2022_Ks.rds\"                                  ##  [13] \"Baez_et_al_2022_LDMC.rds\"                                ##  [14] \"Baez_et_al_2022_LeafArea.rds\"                            ##  [15] \"Baez_et_al_2022_Nleaf.rds\"                               ##  [16] \"Baez_et_al_2022_SLA.rds\"                                 ##  [17] \"Baez_et_al_2022_WoodDensity.rds\"                         ##  [18] \"Bartlett_et_al_2012.rds\"                                 ##  [19] \"Bartlett_et_al_2016.rds\"                                 ##  [20] \"Bjorkman_et_al_2018_Hact.rds\"                            ##  [21] \"Bjorkman_et_al_2018_LDMC.rds\"                            ##  [22] \"Bjorkman_et_al_2018_LeafArea.rds\"                        ##  [23] \"Bjorkman_et_al_2018_Nleaf.rds\"                           ##  [24] \"Bjorkman_et_al_2018_SeedMass.rds\"                        ##  [25] \"Bjorkman_et_al_2018_SLA.rds\"                             ##  [26] \"Bjorkman_et_al_2018_Z95.rds\"                             ##  [27] \"Chianucci_et_al_2018_LeafAngle.rds\"                      ##  [28] \"Choat_et_al_2012_XFT.rds\"                                ##  [29] \"De_Caceres_et_al_2019_CR_pDead.rds\"                      ##  [30] \"Diaz_et_al_2022.rds\"                                     ##  [31] \"Duursma_et_al_2018.rds\"                                  ##  [32] \"Falster_et_al_2021_Al2As.rds\"                            ##  [33] \"Falster_et_al_2021_Hact.rds\"                             ##  [34] \"Falster_et_al_2021_Jmax.rds\"                             ##  [35] \"Falster_et_al_2021_Ks.rds\"                               ##  [36] \"Falster_et_al_2021_LeafAngle.rds\"                        ##  [37] \"Falster_et_al_2021_LeafArea.rds\"                         ##  [38] \"Falster_et_al_2021_LeafDensity.rds\"                      ##  [39] \"Falster_et_al_2021_LeafDuration.rds\"                     ##  [40] \"Falster_et_al_2021_LeafEPS.rds\"                          ##  [41] \"Falster_et_al_2021_LeafPI0.rds\"                          ##  [42] \"Falster_et_al_2021_LeafShape.rds\"                        ##  [43] \"Falster_et_al_2021_LeafWidth.rds\"                        ##  [44] \"Falster_et_al_2021_LifeForm.rds\"                         ##  [45] \"Falster_et_al_2021_Nsapwood.rds\"                         ##  [46] \"Falster_et_al_2021_SeedMass.rds\"                         ##  [47] \"Falster_et_al_2021_SLA.rds\"                              ##  [48] \"Falster_et_al_2021_SRL.rds\"                              ##  [49] \"Falster_et_al_2021_StemEPS.rds\"                          ##  [50] \"Falster_et_al_2021_VCstem_P12.rds\"                       ##  [51] \"Falster_et_al_2021_VCstem_P50.rds\"                       ##  [52] \"Falster_et_al_2021_VCstem_P88.rds\"                       ##  [53] \"Falster_et_al_2021_Vmax.rds\"                             ##  [54] \"Falster_et_al_2021_WoodDensity.rds\"                      ##  [55] \"Guerrero_Ramirez_et_al_2021_GRooT_FineRootDensity.rds\"   ##  [56] \"Guerrero_Ramirez_et_al_2021_GRooT_Nfineroot.rds\"         ##  [57] \"Guerrero_Ramirez_et_al_2021_GRooT_RootingDepth.rds\"      ##  [58] \"Guerrero_Ramirez_et_al_2021_GRooT_SRL.rds\"               ##  [59] \"Guillemot_et_al_2022.rds\"                                ##  [60] \"Henry_et_al_2019.rds\"                                    ##  [61] \"Hoshika_et_al_2018.rds\"                                  ##  [62] \"Kattge_et_al_2020_DispersalMode.rds\"                     ##  [63] \"Kattge_et_al_2020_GrowthForm.rds\"                        ##  [64] \"Kattge_et_al_2020_Hact.rds\"                              ##  [65] \"Kattge_et_al_2020_Jmax.rds\"                              ##  [66] \"Kattge_et_al_2020_LeafAngle.rds\"                         ##  [67] \"Kattge_et_al_2020_LeafArea.rds\"                          ##  [68] \"Kattge_et_al_2020_LeafDensity.rds\"                       ##  [69] \"Kattge_et_al_2020_LeafDuration.rds\"                      ##  [70] \"Kattge_et_al_2020_LeafEPS.rds\"                           ##  [71] \"Kattge_et_al_2020_LeafPI0.rds\"                           ##  [72] \"Kattge_et_al_2020_LeafShape.rds\"                         ##  [73] \"Kattge_et_al_2020_LeafWidth.rds\"                         ##  [74] \"Kattge_et_al_2020_LifeForm.rds\"                          ##  [75] \"Kattge_et_al_2020_LigninPercent.rds\"                     ##  [76] \"Kattge_et_al_2020_Nfineroot.rds\"                         ##  [77] \"Kattge_et_al_2020_Nleaf.rds\"                             ##  [78] \"Kattge_et_al_2020_Nsapwood.rds\"                          ##  [79] \"Kattge_et_al_2020_PhenologyType.rds\"                     ##  [80] \"Kattge_et_al_2020_SeedLongevity.rds\"                     ##  [81] \"Kattge_et_al_2020_SeedMass.rds\"                          ##  [82] \"Kattge_et_al_2020_ShadeTol.rds\"                          ##  [83] \"Kattge_et_al_2020_SLA.rds\"                               ##  [84] \"Kattge_et_al_2020_SRL.rds\"                               ##  [85] \"Kattge_et_al_2020_Vmax.rds\"                              ##  [86] \"Kattge_et_al_2020_WoodC.rds\"                             ##  [87] \"Kattge_et_al_2020_WoodDensity.rds\"                       ##  [88] \"Kattge_et_al_2020_Z95.rds\"                               ##  [89] \"Klein_et_al_2014.rds\"                                    ##  [90] \"Kunert_Tomaskova_2020.rds\"                               ##  [91] \"Lens_et_al_2016.rds\"                                     ##  [92] \"Lin_et_al_2015.rds\"                                      ##  [93] \"Liu_et_al_2019.rds\"                                      ##  [94] \"MartinStPaul_et_al_2017.rds\"                             ##  [95] \"Morris_et_al_2016.rds\"                                   ##  [96] \"Ocampo_Zuleta_Pausas_Paula_2023_FLAMITS_HeatContent.rds\" ##  [97] \"Petruzzellis_et_al_2021.rds\"                             ##  [98] \"Pisek_Adamson_2020_LeafAngle.rds\"                        ##  [99] \"Ramirez_Valiente_et_al_2020.rds\"                         ## [100] \"Sjoman_et_al_2015.rds\"                                   ## [101] \"Sjoman_et_al_2018.rds\"                                   ## [102] \"Tavares_et_al_2023.rds\"                                  ## [103] \"Tavsanoglu_Pausas_2018_Hact.rds\"                         ## [104] \"Tavsanoglu_Pausas_2018_LDMC.rds\"                         ## [105] \"Tavsanoglu_Pausas_2018_LeafArea.rds\"                     ## [106] \"Tavsanoglu_Pausas_2018_LeafDuration.rds\"                 ## [107] \"Tavsanoglu_Pausas_2018_LeafShape.rds\"                    ## [108] \"Tavsanoglu_Pausas_2018_LifeForm.rds\"                     ## [109] \"Tavsanoglu_Pausas_2018_pDead.rds\"                        ## [110] \"Tavsanoglu_Pausas_2018_PhenologyType.rds\"                ## [111] \"Tavsanoglu_Pausas_2018_SeedMass.rds\"                     ## [112] \"Tavsanoglu_Pausas_2018_SLA.rds\"                          ## [113] \"Tavsanoglu_Pausas_2018_WoodDensity.rds\"                  ## [114] \"Tavsanoglu_Pausas_2018_Z95.rds\"                          ## [115] \"Tumber_Davila_et_al_2022.rds\"                            ## [116] \"Vilagrosa_et_al_2014.rds\"                                ## [117] \"Wang_et_al_2022_CPTD.rds\"                                ## [118] \"Wang_et_al_2024.rds\"                                     ## [119] \"Wolfe_et_al_2023.rds\"                                    ## [120] \"Yan_et_al_2020.rds\"                                      ## [121] \"Yebra_et_al_2024_LFMC.rds\"                               ## [122] \"Zhu_et_al_2016.rds\"                                      ## [123] \"Zhu_et_al_2018.rds\""},{"path":"https://emf-creaf.github.io/traits4models/articles/TraitDatabaseHarmonization.html","id":"querying-data-for-particular-traits-or-species","dir":"Articles","previous_headings":"Accessing harmonized trait data","what":"Querying data for particular traits or species","title":"Trait database harmonization","text":"filling species parameter table, may useful inspect amount information available particular traits species. Package trait4models provides couple utility functions . example, can load values Gswmin, minimum stomatal conductance, using function get_trait_data(): Analogously, interested querying trait information particular taxa, can use function get_taxon_data():","code":"gsmin_data <- get_trait_data(harmonized_trait_path, \"Gswmin\",                            progress = FALSE) head(gsmin_data) ##       originalName     acceptedName acceptedNameAuthorship   family  genus ## 1       Abies alba       Abies alba                  Mill. Pinaceae  Abies ## 2 Abies lasiocarpa Abies lasiocarpa          (Hook.) Nutt. Pinaceae  Abies ## 3   Abies sibirica   Abies sibirica                 Ledeb. Pinaceae  Abies ## 4       Acacia koa       Acacia koa                 A.Gray Fabaceae Acacia ## 5  Acacia maidenii  Acacia maidenii               F.Muell. Fabaceae Acacia ## 6   Acacia mangium   Acacia mangium                 Willd. Fabaceae Acacia ##   specificEpithet taxonRank      Gswmin                         Reference ## 1            alba   species 0.001500000                Wang et al. (2024) ## 2      lasiocarpa   species 0.004779429         Boyce and Saunders (2000) ## 3        sibirica   species 0.003044600    Brodribb McAdam, et al. (2014) ## 4             koa   species 0.003800000 Pasquet-Kok Creese, et al. (2010) ## 5        maidenii   species 0.004200000      Warren Aranda, et al. (2011) ## 6         mangium   species 0.004750000      Warren Aranda, et al. (2011) ##   Priority ## 1        1 ## 2        1 ## 3        1 ## 4        1 ## 5        1 ## 6        1 ph_data <- get_taxon_data(harmonized_trait_path, \"Pinus halepensis\",                           progress = FALSE) head(ph_data) ##        Trait        Value Units ## 1   LifeForm Phanerophyte  <NA> ## 2   LifeForm Phanerophyte  <NA> ## 3   LifeForm Phanerophyte  <NA> ## 4 GrowthForm         Tree  <NA> ## 5 GrowthForm         Tree  <NA> ## 8  LeafShape       Needle  <NA> ##                                                                                                                                                                                                                                Reference ## 1                                                           Sophie Gachet, Errol V\\xe9la, Thierry Tatoni, 2005, BASECO: a floristic and ecological database of Mediterranean French flora. Biodiversity and Conservation 14(4):1023-1034 ## 2 Dressler S, M Schmidt, G Zizka (2014) Introducing African Plants\\x97A Photo Guide\\x97An Interactive Photo Data-Base and Rapid Identification Tool for Continental Africa. Taxon 63(5) 1159-1161 DOI: http://dx.doi.org/10.12705/635.26 ## 3                                                                                                                                                                                                                            Greuter1984 ## 4                                                                      Weigelt, P., C. K\\xf6nig, and H. Kreft (2019) GIFT \\x96 A Global Inventory of Floras and Traits for macroecology and biogeography. bioRxiv doi.org/10.1101/535005 ## 5                                                                                                                                                                                                                        Liu et al. 2019 ## 8                                                                                                                                                                                                                                 unpub. ##   Priority ## 1        1 ## 2        1 ## 3        1 ## 4        1 ## 5        2 ## 8        1"},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Miquel De Cáceres. Author, maintainer, copyright holder. Nicolas Martin-StPaul. Author. Adriana Tovar. Author. Víctor Granda. Author.","code":""},{"path":"https://emf-creaf.github.io/traits4models/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"De Cáceres M, Martin-StPaul N, Tovar , Granda V (2024). traits4models: plant traits model parameters. R package version 0.1.0, https://emf-creaf.github.io/traits4models/.","code":"@Manual{,   title = {traits4models: From plant traits to model parameters},   author = {Miquel {De Cáceres} and Nicolas Martin-StPaul and Adriana Tovar and Víctor Granda},   year = {2024},   note = {R package version 0.1.0},   url = {https://emf-creaf.github.io/traits4models/}, }"},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/index.html","id":"introduction","dir":"","previous_headings":"","what":"Introduction","title":"From plant traits to model parameters","text":"Package traits4models designed facilitate creating plant species parameter tables process-based models forest function /dynamics. Specifically utility functions provided : (1) harmonize plant trait databases; (2) harmonize allometry databases; (3) populating species parameter tables . present, species parameter estimation tailored used models included packages medfate medfateland, functions added become useful process-based models (see section Contributing guide).","code":""},{"path":"https://emf-creaf.github.io/traits4models/index.html","id":"package-installation","dir":"","previous_headings":"","what":"Package installation","title":"From plant traits to model parameters","text":"Since packages evolve together, installing traits4models normally requires --date version package medfate, available CRAN. latest stable versions GitHub follows (required package remotes installed/updated first):","code":"remotes::install_github(\"emf-creaf/traits4models\")"},{"path":"https://emf-creaf.github.io/traits4models/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"From plant traits to model parameters","text":"main functions harmonization harmonize_taxonomy_WFO(), check_harmonized_trait() check_harmonized_allometry(). number functions provided inspecting set harmonized trait/allometry data. Finally, model-specific functions provided populate species parameter tables .","code":""},{"path":"https://emf-creaf.github.io/traits4models/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"From plant traits to model parameters","text":"number vignettes illustrate initialize inputs run simulation models traits4models. can found package website.","code":""},{"path":"https://emf-creaf.github.io/traits4models/index.html","id":"companion-r-packages","dir":"","previous_headings":"","what":"Companion R packages","title":"From plant traits to model parameters","text":"development traits4models intended complement packages medfate medfateland. Two packages complete simulation framework, can used many purposes beyond forest modelling: Package meteoland allows generating daily weather input simulation models medfate medfateland. Package meteoland dependency medfate medfateland, can used independently obtain daily weather data. Package forestables allows reading harmonizing forest inventory data common data structure. Initialization workflows medfateland can use data forestables, data structures package can used many studies beyond modelling. relationships five packages illustrated figure , black arrows indicate package dependencies gray arrows indicate model parameter data provision.","code":""},{"path":"https://emf-creaf.github.io/traits4models/index.html","id":"authorship","dir":"","previous_headings":"","what":"Authorship","title":"From plant traits to model parameters","text":"set R packages developed maintained Ecosystem Modelling Facility unit CREAF (Spain), close collaboration researchers URFM-INRAE (France) CTFC (Spain).","code":""},{"path":"https://emf-creaf.github.io/traits4models/index.html","id":"funding","dir":"","previous_headings":"","what":"Funding","title":"From plant traits to model parameters","text":"Research project: Boosting process-based models project forest dynamics associated ecosystem services stand--regional scales (BOMFORES). Financial Entity: Ministerio de Ciencia e Innovación (PID2021-126679OB-I00). Duration : 01/09/2022 : 31/08/2024. PI: Miquel De Cáceres.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/HarmonizedTraitDefinition.html","id":null,"dir":"Reference","previous_headings":"","what":"Plant trait definitions — HarmonizedTraitDefinition","title":"Plant trait definitions — HarmonizedTraitDefinition","text":"data frame accepted plant trait definitions.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/HarmonizedTraitDefinition.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Plant trait definitions — HarmonizedTraitDefinition","text":"data frame parameters rows columns: Definition: Trait definition Notation: Trait notation required harmonization. Type: Either 'Numeric' (quantitative traits) 'String' (qualitative traits). Units: Required units quantitative traits.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/HarmonizedTraitDefinition.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plant trait definitions — HarmonizedTraitDefinition","text":"","code":"data(HarmonizedTraitDefinition)"},{"path":"https://emf-creaf.github.io/traits4models/reference/SpParamsES.html","id":null,"dir":"Reference","previous_headings":"","what":"Data tables with species parameter definition and values for different countries — SpParamsES","title":"Data tables with species parameter definition and values for different countries — SpParamsES","text":"data sets species parameter tables resulting existing databases used conjunction national forest inventory data.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/SpParamsES.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Data tables with species parameter definition and values for different countries — SpParamsES","text":"Data frames SpParamsES (Spain), SpParamsFR (France), SpParamsAU (Australia) SpParamsUS (US) species genus rows column names equal parameter names   SpParamsDefinition (latter package medfate).","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/SpParamsES.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Data tables with species parameter definition and values for different countries — SpParamsES","text":"SpParamsES, SpParamsFR,  SpParamsAU SpParamsUS species parameter data frames designed used National Forest Inventories Spain, France, Australia USA, respectively. Details procedures used obtain species parameter tables can found article https://emf-creaf.github.io/medfate/.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/SpParamsES.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Data tables with species parameter definition and values for different countries — SpParamsES","text":"","code":"data(SpParamsES) data(SpParamsFR) data(SpParamsUS) data(SpParamsAU)"},{"path":"https://emf-creaf.github.io/traits4models/reference/check_harmonized_trait.html","id":null,"dir":"Reference","previous_headings":"","what":"Check data harmonization — check_harmonized_trait","title":"Check data harmonization — check_harmonized_trait","text":"Functions check input data frame (trait table allometry table) appropriate format data model parameter filling.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/check_harmonized_trait.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check data harmonization — check_harmonized_trait","text":"","code":"check_harmonized_trait(x)  check_harmonized_allometry(x)"},{"path":"https://emf-creaf.github.io/traits4models/reference/check_harmonized_trait.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check data harmonization — check_harmonized_trait","text":"x data frame harmonized trait data harmonized allometry data","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/check_harmonized_trait.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check data harmonization — check_harmonized_trait","text":"(invisible) logical indicating whether data frame acceptable .","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/check_harmonized_trait.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check data harmonization — check_harmonized_trait","text":"Function check_harmonized_trait() checks input data frame conforms following requirements: columns called originalName, acceptedName, acceptedNameAuthorship, family, genus, specificEpithet, taxonRank,     returned function harmonize_taxonomy_WFO. names remaining columns \"Units\", \"Reference\", \"Priority\" valid trait name according notation required HarmonizedTraitDefinition. trait columns, values conform required type HarmonizedTraitDefinition. Function check_harmonized_allometry() checks input data frame conforms following requirements: columns called originalName, acceptedName, acceptedNameAuthorship, family, genus, specificEpithet, taxonRank,     returned function harmonize_taxonomy_WFO. columns called \"Response\" \"Equation\". Columns \"Priority\" \"Reference\" recommended. Column \"Response\" identifies response variable. Column \"ResponseDescription\" contains longer description response variable. Columns \"Predictor1\", \"Predictor2\", ... identify predictor variables. Columns \"PredictorDescription1\", \"PredictorDescription2\", ... contain longer descriptions predictor variables. Allometry coefficient columns named \"\", \"c\", \"c\", ..., \"f\" contain numeric values.","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/reference/check_medfate_params.html","id":null,"dir":"Reference","previous_headings":"","what":"Checks species parameter tables — check_medfate_params","title":"Checks species parameter tables — check_medfate_params","text":"Checks input data frame appropriate format data simulations medfate.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/check_medfate_params.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Checks species parameter tables — check_medfate_params","text":"","code":"check_medfate_params(x, verbose = TRUE)"},{"path":"https://emf-creaf.github.io/traits4models/reference/check_medfate_params.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Checks species parameter tables — check_medfate_params","text":"x data frame species parameter data verbose boolean flag prompt detailed process information.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/check_medfate_params.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Checks species parameter tables — check_medfate_params","text":"(invisible) data frame missing values strict parameters.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/check_medfate_params.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Checks species parameter tables — check_medfate_params","text":"function performs following checks: input data frame. parameter names defined SpParamsDefinition listed columns. Strict parameters contain missing values. Strict parameters defined SpParamsDefinition.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/check_medfate_params.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Checks species parameter tables — check_medfate_params","text":"","code":"check_medfate_params(SpParamsES) #> ✔ The data frame is acceptable as species parameter table for medfate. check_medfate_params(SpParamsFR) #> ✔ The data frame is acceptable as species parameter table for medfate. check_medfate_params(SpParamsUS) #> ✔ The data frame is acceptable as species parameter table for medfate. check_medfate_params(SpParamsAU) #> ✔ The data frame is acceptable as species parameter table for medfate."},{"path":"https://emf-creaf.github.io/traits4models/reference/complete_medfate_strict.html","id":null,"dir":"Reference","previous_headings":"","what":"Complete strict parameters for medfate — complete_medfate_strict","title":"Complete strict parameters for medfate — complete_medfate_strict","text":"Taxonomy-based imputation strict parameters medfate.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/complete_medfate_strict.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Complete strict parameters for medfate — complete_medfate_strict","text":"","code":"complete_medfate_strict(   SpParams,   params = NULL,   progress = TRUE,   verbose = FALSE )"},{"path":"https://emf-creaf.github.io/traits4models/reference/complete_medfate_strict.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Complete strict parameters for medfate — complete_medfate_strict","text":"SpParams species parameter data frame completed params character vector strict parameters completed. missing, strict parameters checked completion. progress boolean flag prompt progress. verbose boolean flag prompt detailed process information.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/complete_medfate_strict.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Complete strict parameters for medfate — complete_medfate_strict","text":"species parameter data frame imputed strict parameter values","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/complete_medfate_strict.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Complete strict parameters for medfate — complete_medfate_strict","text":"function performs imputation strict parameters basis non-missing values taxonomically-close taxa. Strict parameters defined SpParamsDefinition. First, taxon missing values subspecies, function looks values species level. Missing values species level filled data genus, family, order group levels, depending availability information. Quantitative values averaged, whereas qualitative values first non-missing value used. Beware imputation can result errors initial amount information scarce. Therefore, users revised output function correct potential errors manually, whenever detected.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_allometries.html","id":null,"dir":"Reference","previous_headings":"","what":"Allometry filling from harmonized data — fill_medfate_allometries","title":"Allometry filling from harmonized data — fill_medfate_allometries","text":"Function uses harmonized allometric equations fill medfate allometric coefficients taxa basis accepted name.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_allometries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Allometry filling from harmonized data — fill_medfate_allometries","text":"","code":"fill_medfate_allometries(   SpParams,   harmonized_allometry_path,   priorization = TRUE,   erase_previous = TRUE,   replace_previous = TRUE,   progress = TRUE,   verbose = FALSE )"},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_allometries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Allometry filling from harmonized data — fill_medfate_allometries","text":"SpParams data frame medfate species parameters populated. harmonized_allometry_path path harmonized trait data files (.rds .csv format). priorization boolean flag perform priorization data sources others (yet implemented!). erase_previous boolean flag indicate previous values set NA populating new data replace_previous boolean flag indicate non-missing previous values replaced new data progress boolean flag prompt progress. verbose boolean flag indicate extra console output.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_allometries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Allometry filling from harmonized data — fill_medfate_allometries","text":"modified data frame medfate species parameters.","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_allometries.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Allometry filling from harmonized data — fill_medfate_allometries","text":"Miquel De Cáceres Ainsa, EMF-CREAF","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_inventory_traits.html","id":null,"dir":"Reference","previous_headings":"","what":"Fills parameters from inventory data — fill_medfate_inventory_traits","title":"Fills parameters from inventory data — fill_medfate_inventory_traits","text":"Extracts species parameter values forest inventory data","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_inventory_traits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fills parameters from inventory data — fill_medfate_inventory_traits","text":"","code":"fill_medfate_inventory_traits(   SpParams,   x,   quantile_Hmed = 0.5,   quantile_Hmax = 0.99,   quantile_fHDmin = 0.05,   quantile_fHDmax = 0.95,   progress = TRUE,   verbose = FALSE )"},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_inventory_traits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fills parameters from inventory data — fill_medfate_inventory_traits","text":"SpParams species parameter data frame filled. x list forest objects, data frame column called forest, whose elements class forest. quantile_Hmed Quantile Hmed quantile_Hmax Quantile Hmax quantile_fHDmin Quantile fHDmin quantile_fHDmax Quantile fHDmax progress boolean flag prompt progress. verbose boolean flag indicate extra console output.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_inventory_traits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fills parameters from inventory data — fill_medfate_inventory_traits","text":"modified data frame medfate species parameters","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_inventory_traits.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fills parameters from inventory data — fill_medfate_inventory_traits","text":"function fills information species parameter table data target forest inventory simulations conducted. Matching performed `Species` forest inventory data `Name` species parameter table. following information extracted: GrowthForm: Growth form according usage forest inventory. example, species cited treeData tables shrubData tables, growth form \"Tree\". Hmax: Maximum tree/shrub height (cm), according `Height` column treeData shrubData quantile_Hmax parameter. Hmed: Median tree/shrub height (cm), according `Height` column treeData shrubData quantile_Hmed parameter. fHDmin, fHDmax: Minimum maximum height diameter ratio trees, according `Height` `DBH` columns treeData quantile_fHDmin quantile_fHDmax parameters, respectively.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_traits.html","id":null,"dir":"Reference","previous_headings":"","what":"Trait filling from harmonized data — fill_medfate_traits","title":"Trait filling from harmonized data — fill_medfate_traits","text":"Fills species parameter table medfate trait data harmonized data sources","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_traits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Trait filling from harmonized data — fill_medfate_traits","text":"","code":"fill_medfate_traits(   SpParams,   harmonized_trait_path,   priorization = TRUE,   erase_previous = TRUE,   replace_previous = TRUE,   progress = TRUE,   verbose = FALSE )"},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_traits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Trait filling from harmonized data — fill_medfate_traits","text":"SpParams species parameter data frame filled package medfate. harmonized_trait_path directory path RDS files harmonized trait databases . priorization boolean flag perform priorization data sources others. erase_previous boolean flag indicate previous values set NA populating new data replace_previous boolean flag indicate non-missing previous values replaced new data progress boolean flag prompt progress. verbose boolean flag prompt detailed process information.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_traits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Trait filling from harmonized data — fill_medfate_traits","text":"modified data frame medfate species parameters","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/fill_medfate_traits.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Trait filling from harmonized data — fill_medfate_traits","text":"function processes multiple parameters medfate SpParams table. identifies row modify matching column 'AcceptedName' SpParams column acceptedName harmonized trait parameter sources. target taxon species, values taken rows trait_table species names match. target taxon genus, values taken rows genus . priorization = TRUE column priority_column available data sources, function prioritize sources higher priority first, filling parameters inspecting data sources lower priority.","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/reference/get_trait_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Load harmonized trait/allometry data — get_trait_data","title":"Load harmonized trait/allometry data — get_trait_data","text":"Functions load harmonized trait data harmonized allometry data","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/get_trait_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load harmonized trait/allometry data — get_trait_data","text":"","code":"load_harmonized_trait_tables(harmonized_trait_path, progress = TRUE)  load_harmonized_allometry_tables(harmonized_allometry_path, progress = TRUE)  get_trait_data(   harmonized_trait_path,   trait_name,   is_numeric = TRUE,   progress = TRUE )  get_allometry_data(harmonized_allometry_path, response, progress = TRUE)  get_taxon_data(harmonized_trait_path, accepted_name, progress = TRUE)"},{"path":"https://emf-creaf.github.io/traits4models/reference/get_trait_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load harmonized trait/allometry data — get_trait_data","text":"harmonized_trait_path path harmonized trait data files (.rds .csv format). progress boolean flag prompt progress. harmonized_allometry_path path harmonized allometry data files (.rds .csv format). trait_name string accepted trait name is_numeric boolean indicating whether trait numeric response String indicating response variable allometric equations. accepted_name String accepted taxon name.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/get_trait_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load harmonized trait/allometry data — get_trait_data","text":"Function load_harmonized_trait_tables() returns list harmonized trait data tables. Function load_harmonized_allometry_tables() returns list harmonized allometry data tables. Function get_trait_data() returns data frame pooled information single trait. Function get_taxon_data() returns data frame pooled information given taxon.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/get_trait_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Load harmonized trait/allometry data — get_trait_data","text":"functions add Priority = 1 trait data sources Priority column defined.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/get_trait_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load harmonized trait/allometry data — get_trait_data","text":"","code":"if (FALSE) { # \\dontrun{  # List harmonized trait files  harmonized_trait_path = \"~/OneDrive/EMF_datasets/PlantTraitDatabases/Products/harmonized\"  list.files(path = harmonized_trait_path)   # Load all harmonized trait data  l <- load_harmonized_trait_tables(harmonized_trait_path)  head(l[[1]])   # Get data for one specific trait  get_trait_data(harmonized_trait_path, \"SLA\")   # Get trait data for one specific taxon  get_taxon_data(harmonized_trait_path, \"Pinus halepensis\")   # List harmonized allometry files  harmonized_allometry_path = \"~/OneDrive/EMF_datasets/AllometryDatabases/Products/harmonized\"  list.files(path = harmonized_allometry_path)   # Load all harmonized allometry data  l <- load_harmonized_allometry_tables(harmonized_allometry_path)  head(l[[1]])   # Get allometry data for one specific response  get_allometry_data(harmonized_allometry_path, \"FoliarBiomass\") } # }"},{"path":"https://emf-creaf.github.io/traits4models/reference/harmonize_taxonomy_WFO.html","id":null,"dir":"Reference","previous_headings":"","what":"Harmonizes taxonomy — harmonize_taxonomy_WFO","title":"Harmonizes taxonomy — harmonize_taxonomy_WFO","text":"Harmonizes plant taxonomy according World Flora Online","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/harmonize_taxonomy_WFO.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Harmonizes taxonomy — harmonize_taxonomy_WFO","text":"","code":"harmonize_taxonomy_WFO(db, WFO_backbone_file, progress = TRUE, verbose = FALSE)"},{"path":"https://emf-creaf.github.io/traits4models/reference/harmonize_taxonomy_WFO.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Harmonizes taxonomy — harmonize_taxonomy_WFO","text":"db Data frame harmonize, species names column called 'originalName'. data frame normally include columns transferred unaltered output data frame. WFO_backbone_file Path file containing backbone World Flora Online. progress boolean flag prompt progress. verbose boolean flag print console output matching information.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/harmonize_taxonomy_WFO.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Harmonizes taxonomy — harmonize_taxonomy_WFO","text":"data frame columns: originalName: Original taxon name given input data frame. acceptedName: Accepted taxon name according World Flora Online. acceptedNameAuthorship: Accepted taxon name authorship according World Flora Online. family: Taxonomic family accepted taxon. genus: Taxonomic genus accepted taxon. specificEpithet: Specific epithet accepted taxon. taxonRank: Taxonomic rank accepted taxon (e.g. \"species\", \"subspecies\", \"genus\", ...). Additional columns may present, coming input data frame. left unmodified.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/init_medfate_params.html","id":null,"dir":"Reference","previous_headings":"","what":"Initializes species parameter table — init_medfate_params","title":"Initializes species parameter table — init_medfate_params","text":"Creates empty plant parameter table medfate, populating taxonomic information desired.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/init_medfate_params.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initializes species parameter table — init_medfate_params","text":"","code":"init_medfate_params(x, complete_rows = TRUE, sort = TRUE, verbose = FALSE)"},{"path":"https://emf-creaf.github.io/traits4models/reference/init_medfate_params.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initializes species parameter table — init_medfate_params","text":"x data frame columns returned function harmonize_taxonomy_WFO. complete_rows Boolean flag indicate extra rows added cited species/genera (fill_taxonomy = TRUE). sort Boolean flag force sorting ascending order Name. verbose boolean flag indicate extra console output.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/init_medfate_params.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Initializes species parameter table — init_medfate_params","text":"data frame empty species parameter values suitable medfate simulations. data frame normally contain rows complete_rows set TRUE.","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/init_medfate_params.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Initializes species parameter table — init_medfate_params","text":"Taxonomy taken input data frame, internal data obtained package taxize used taxa family, .","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/reference/init_medfate_params.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Initializes species parameter table — init_medfate_params","text":"Miquel De Cáceres Ainsa, EMF-CREAF","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/populate_traits.html","id":null,"dir":"Reference","previous_headings":"","what":"Populate species parameters from trait data — populate_traits","title":"Populate species parameters from trait data — populate_traits","text":"Internal function fill medfate species trait parameters data table species traits","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/populate_traits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Populate species parameters from trait data — populate_traits","text":"","code":"populate_traits(   SpParams,   trait_table,   trait_mapping,   taxon_column,   genus_column = NULL,   priority_column = NULL,   character_traits = FALSE,   summary_function = \"median\",   summary_params = list(na.rm = TRUE),   scalar_functions = NULL,   replace_previous = FALSE,   erase_previous = FALSE,   verbose = FALSE )"},{"path":"https://emf-creaf.github.io/traits4models/reference/populate_traits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Populate species parameters from trait data — populate_traits","text":"SpParams data frame medfate species parameters populated. trait_table data frame functional traits columns plants rows. trait_mapping named string vector specifying trait data column used populate medfate param. Elements data base columns names medfate params. taxon_column string identifying column trait_table identifies taxon names). genus_column string identifying column trait_table identifies genus. NULL genus taken first word taxon names. priority_column string identifying column trait_table identifies priority data sources others (lower values priority processed earlier). character_traits Boolean flag treat traits character-valued summary_function function summarize multiple values taxonomic entity. default, median values taken quantitative traits frequent value taken qualitative traits. summary_params list summary function params (default na.rm=TRUE). scalar_functions named list scalar functions traits needing transformation units scaling. Names medfate params. replace_previous boolean flag indicate non-missing previous values replaced new data erase_previous boolean flag indicate previous values set NA populating new data verbose boolean flag indicate extra console output","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/populate_traits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Populate species parameters from trait data — populate_traits","text":"modified data frame medfate species parameters","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/populate_traits.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Populate species parameters from trait data — populate_traits","text":"Matches column 'AcceptedName' SpParams trait parameter sources. target taxon species, values taken rows trait_table species names match. target taxon genus, values taken rows genus . column priority_column supplied, function prioritize sources higher priority first.","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/reference/populate_traits.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Populate species parameters from trait data — populate_traits","text":"Miquel De Cáceres Ainsa, EMF-CREAF","code":""},{"path":"https://emf-creaf.github.io/traits4models/reference/traits4models-package.html","id":null,"dir":"Reference","previous_headings":"","what":"traits4models: From plant trait data to model parameters — traits4models-package","title":"traits4models: From plant trait data to model parameters — traits4models-package","text":"Utility functions facilitate harmonizing plant trait data bases defining species parameter tables process-based models","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/traits4models/reference/traits4models-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"traits4models: From plant trait data to model parameters — traits4models-package","text":"Maintainer: Miquel De Cáceres miquelcaceres@gmail.com [ORCID](https://orcid.org/0000-0001-7132-2080) Author: Nicolas Martin-StPaul [ORCID](https://orcid.org/0000-0001-7574-0108) Author: Adriana Tovar Author: Víctor Granda [ORCID](https://orcid.org/0000-0002-0469-1991)","code":""}]
