<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Trait database harmonization • traits4models</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Trait database harmonization">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">traits4models</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Data preparation</h6></li>
    <li><a class="dropdown-item" href="../articles/TraitDatabaseHarmonization.html">Trait database harmonization</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Building species parameter tables</h6></li>
    <li><a class="dropdown-item" href="../articles/SpeciesParameterization.html">Building species parameter tables for medfate</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/emf-creaf/traits4models/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Trait database harmonization</h1>
                        <h4 data-toc-skip class="author">Miquel De
Cáceres / Nicolas Martin-StPaul</h4>
            
            <h4 data-toc-skip class="date">2024-07-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/emf-creaf/traits4models/blob/HEAD/vignettes/TraitDatabaseHarmonization.Rmd" class="external-link"><code>vignettes/TraitDatabaseHarmonization.Rmd</code></a></small>
      <div class="d-none name"><code>TraitDatabaseHarmonization.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Species parameter values cannot be drawn from a single data source.
Moreover, the availability of plant trait data continuously increases,
as additional efforts are made in observational or experimental studies
<span class="citation">(Kattge et al. 2020)</span>. This means that
multiple data sources need to be harmonized before species parameter
tables are build, in terms of:</p>
<pre><code>a) Nomenclature of measured variables.
b) Measurement units.
c) Taxonomy of the measured biological entities. </code></pre>
<p>The result of this harmonization needs to be stored in a harmonized
format for subsequent use when creating species parameter tables. This
vignette illustrates the harmonization procedures for an example data
set using package <strong>trait4models</strong> and the usual
<strong>tidyverse</strong> packages.</p>
<blockquote>
<p><strong>IMPORTANT</strong>: This vignette is not self-contained, in
the sense that it cannot be reproduced without access to data sets that
are not included. Nevertheless, it is intended to serve as example of
species parameterization for other regions.</p>
</blockquote>
<div class="section level3">
<h3 id="required-packages">Required packages<a class="anchor" aria-label="anchor" href="#required-packages"></a>
</h3>
<p>Assuming we have <strong>traits4models</strong> installed, we load it
and other common packages that we will employ in this vignette:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">traits4models</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-dataset">Example dataset<a class="anchor" aria-label="anchor" href="#example-dataset"></a>
</h3>
<p>As example for the harmonization process, here we will use data from
a Bartlett et al. <span class="citation">(2016)</span>. Much larger data
sets can (and should) be processed, but they take much more time.
Bartlett et al. provide traits that describe the leaf/stem/root
hydraulic vulnerability curves of several species as well as water
potential corresponding to stomatal aperture. We start by loading the
dataset:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DB_path</span> <span class="op">&lt;-</span> <span class="st">"~/OneDrive/EMF_datasets/PlantTraitDatabases/"</span></span>
<span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">DB_path</span>, <span class="st">"Sources/Bartlett_et_al_2016/pnas.1604088113.sd01.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The data looks as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 310 × 26</span></span></span>
<span><span class="co">##    Group      Name          Biome `Evergreen/Decid` `Leaf P50 (MPa)` `TLP (MPa)`</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Angiosperm Acacia gregg… Semi… E                            <span style="color: #BB0000;">NA</span>          -<span style="color: #BB0000;">4.25</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Angiosperm Acer campest… Temp… D                            -<span style="color: #BB0000;">1.32</span>       -<span style="color: #BB0000;">1.9</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Angiosperm Acer grandid… Temp… D                            <span style="color: #BB0000;">NA</span>          -<span style="color: #BB0000;">2.45</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Angiosperm Acer monspes… Med.… D                            -<span style="color: #BB0000;">1.89</span>       -<span style="color: #BB0000;">2.2</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Angiosperm Acer negundo  Temp… D                            <span style="color: #BB0000;">NA</span>          -<span style="color: #BB0000;">1.59</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Angiosperm Acer pseudop… Temp… D                            -<span style="color: #BB0000;">1.19</span>       -<span style="color: #BB0000;">1.4</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Angiosperm Acer rubrum   Temp… D                            -<span style="color: #BB0000;">1.7</span>        -<span style="color: #BB0000;">1.59</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Angiosperm Acer sacchar… Temp… D                            <span style="color: #BB0000;">NA</span>          -<span style="color: #BB0000;">2.78</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Angiosperm Adansonia ru… Trop… D                            <span style="color: #BB0000;">NA</span>          -<span style="color: #BB0000;">1.12</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Angiosperm Adansonia za  Trop… D                            <span style="color: #BB0000;">NA</span>          -<span style="color: #BB0000;">1.26</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 300 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 20 more variables: `Stem P50 (MPa)` &lt;dbl&gt;, `Stem P88 (MPa)` &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `Stem P12 (MPa)` &lt;dbl&gt;, `Root P50 (MPa)` &lt;dbl&gt;, `Gs P50 (MPa)` &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `Gs 95 (MPa)` &lt;dbl&gt;, `plant Psi_lethal (MPa)` &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `Psimin_predawn (MPa)` &lt;dbl&gt;, `Psimin_midday (MPa)` &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `Psimin_midday and/or predawn Method` &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `Reference (for Leaf P50)` &lt;chr&gt;, `Reference (for TLP)` &lt;chr&gt;, …</span></span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="harmonizing-notation-and-measurement-units">Harmonizing notation and measurement units<a class="anchor" aria-label="anchor" href="#harmonizing-notation-and-measurement-units"></a>
</h2>
<p>The first steps to be done are to harmonize trait notation, i.e. how
plant traits are referred to, and if necessary, change their units.
Package <strong>traits4models</strong> includes a data table called
<code>HarmonizedTraitDefinition</code> that presents plant trait
definitions and their required notation and units:</p>
<table class="table">
<colgroup>
<col width="72%">
<col width="9%">
<col width="4%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">Definition</th>
<th align="left">Notation</th>
<th align="left">Type</th>
<th align="left">Units</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Life form</td>
<td align="left">LifeForm</td>
<td align="left">String</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Growth form</td>
<td align="left">GrowthForm</td>
<td align="left">String</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Leaf shape</td>
<td align="left">LeafShape</td>
<td align="left">String</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Leaf area</td>
<td align="left">LeafArea</td>
<td align="left">Numeric</td>
<td align="left">mm2</td>
</tr>
<tr class="odd">
<td align="left">Leaf size (category)</td>
<td align="left">LeafSize</td>
<td align="left">String</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Leaf angle (inclination, orientation)</td>
<td align="left">LeafAngle</td>
<td align="left">Numeric</td>
<td align="left">degrees</td>
</tr>
<tr class="odd">
<td align="left">Dispersal syndrome</td>
<td align="left">DispersalMode</td>
<td align="left">String</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Leaf phenology type</td>
<td align="left">PhenologyType</td>
<td align="left">String</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Duration of leaves (leaf lifespan)</td>
<td align="left">LeafDuration</td>
<td align="left">Numeric</td>
<td align="left">yrs</td>
</tr>
<tr class="even">
<td align="left">Maximum plant height</td>
<td align="left">Hmax</td>
<td align="left">Numeric</td>
<td align="left">cm</td>
</tr>
<tr class="odd">
<td align="left">Actual plant height</td>
<td align="left">Hact</td>
<td align="left">Numeric</td>
<td align="left">cm</td>
</tr>
<tr class="even">
<td align="left">Rooting depth</td>
<td align="left">Z95</td>
<td align="left">Numeric</td>
<td align="left">mm</td>
</tr>
<tr class="odd">
<td align="left">Leaf area per leaf dry mass (specific leaf area, SLA),
1/ Leaf mass per area (LMA)</td>
<td align="left">SLA</td>
<td align="left">Numeric</td>
<td align="left">m2<em>kg-1 = mm2</em>mg-1</td>
</tr>
<tr class="even">
<td align="left">Leaf area to sapwood area ratio (Al2As), 1 / Huber
Value (Hv)</td>
<td align="left">Al2As</td>
<td align="left">Numeric</td>
<td align="left">m2*m-2</td>
</tr>
<tr class="odd">
<td align="left">Proportion of sapwood corresponding to conducive
elements (vessels or tracheids) as opposed to parenchymatic tissue.</td>
<td align="left">conduit2sapwood</td>
<td align="left">Numeric</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Specific root length</td>
<td align="left">SRL</td>
<td align="left">Numeric</td>
<td align="left">cm/g</td>
</tr>
<tr class="odd">
<td align="left">Proportion of total fine fuels that are dead</td>
<td align="left">pDead</td>
<td align="left">Numeric</td>
<td align="left">[0-1]</td>
</tr>
<tr class="even">
<td align="left">Stem carbon (C) content per stem dry mass</td>
<td align="left">WoodC</td>
<td align="left">Numeric</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Density of leaf tissue (dry weight over volume)</td>
<td align="left">LeafDensity</td>
<td align="left">Numeric</td>
<td align="left">g<em>cm-3 = mg</em>mm-3</td>
</tr>
<tr class="even">
<td align="left">Wood tissue density (at 0% humidity!)</td>
<td align="left">WoodDensity</td>
<td align="left">Numeric</td>
<td align="left">g<em>cm-3 = mg</em>mm-3</td>
</tr>
<tr class="odd">
<td align="left">Density of fine root tissue (dry weight over
volume).</td>
<td align="left">FineRootDensity</td>
<td align="left">Numeric</td>
<td align="left">g<em>cm-3 = mg</em>mm-3</td>
</tr>
<tr class="even">
<td align="left">Leaf width</td>
<td align="left">LeafWidth</td>
<td align="left">Numeric</td>
<td align="left">cm</td>
</tr>
<tr class="odd">
<td align="left">Maximum stomatal conductance to water vapor</td>
<td align="left">Gswmax</td>
<td align="left">Numeric</td>
<td align="left">mol H2O * s-1 * m-2</td>
</tr>
<tr class="even">
<td align="left">Minimum stomatal conductance to water vapor</td>
<td align="left">Gswmin</td>
<td align="left">Numeric</td>
<td align="left">mol H2O * s-1 * m-2</td>
</tr>
<tr class="odd">
<td align="left">Osmotic potential at full turgor of leaves</td>
<td align="left">LeafPI0</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="even">
<td align="left">Modulus of elasticity (capacity of the cell wall to
resist changes in volume in response to changes in turgor) of
leaves</td>
<td align="left">LeafEPS</td>
<td align="left">Numeric</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Leaf apoplastic fraction</td>
<td align="left">LeafAF</td>
<td align="left">Numeric</td>
<td align="left">[0-1]</td>
</tr>
<tr class="even">
<td align="left">Leaf water potential at turgor loss point</td>
<td align="left">Ptlp</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="odd">
<td align="left">Parameters of the stomatal response to leaf water
potential</td>
<td align="left">Gs_P20</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="even">
<td align="left">Parameters of the stomatal response to leaf water
potential</td>
<td align="left">Gs_P50</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="odd">
<td align="left">Parameters of the stomatal response to leaf water
potential</td>
<td align="left">Gs_P80</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="even">
<td align="left">Parameters of the stomatal response to leaf water
potential</td>
<td align="left">Gs_P90</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="odd">
<td align="left">Parameters of the stomatal response to leaf water
potential</td>
<td align="left">Gs_P95</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="even">
<td align="left">Leaf photosynthesis carboxylation capacity (Vcmax) per
leaf area (Farquhar model)</td>
<td align="left">Vmax</td>
<td align="left">Numeric</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Leaf photosynthesis electron transport capacity (Jmax)
per leaf area (Farquhar model)</td>
<td align="left">Jmax</td>
<td align="left">Numeric</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Leaf nitrogen (N) content per leaf dry mass</td>
<td align="left">Nleaf</td>
<td align="left">Numeric</td>
<td align="left">mg/g</td>
</tr>
<tr class="odd">
<td align="left">Wood nitrogen (N) content per wood dry mass</td>
<td align="left">Nsapwood</td>
<td align="left">Numeric</td>
<td align="left">mg/g</td>
</tr>
<tr class="even">
<td align="left">Fine root nitrogen (N) content per fine root dry
mass</td>
<td align="left">Nfineroot</td>
<td align="left">Numeric</td>
<td align="left">mg/g</td>
</tr>
<tr class="odd">
<td align="left">Maximum stem-specific hydraulic conductivity</td>
<td align="left">Ks</td>
<td align="left">Numeric</td>
<td align="left">kg m-1 MPa-1 s-1</td>
</tr>
<tr class="even">
<td align="left">Maximum leaf-specific hydraulic conductivity
(Ks*Hv)</td>
<td align="left">Kl</td>
<td align="left">Numeric</td>
<td align="left">10-4 kg m-1 MPa-1 s-1</td>
</tr>
<tr class="odd">
<td align="left">Maximum leaf hydraulic conductance</td>
<td align="left">kleaf</td>
<td align="left">Numeric</td>
<td align="left">mmolm-2s-1MPa-1</td>
</tr>
<tr class="even">
<td align="left">Maximum whole-plant hydraulic conductance</td>
<td align="left">kplant</td>
<td align="left">Numeric</td>
<td align="left">mmolm-2s-1MPa-1</td>
</tr>
<tr class="odd">
<td align="left">Parameters of the stem vulnerability curve</td>
<td align="left">VCstem_P12</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="even">
<td align="left">Parameters of the stem vulnerability curve</td>
<td align="left">VCstem_P50</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="odd">
<td align="left">Parameters of the stem vulnerability curve</td>
<td align="left">VCstem_P88</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="even">
<td align="left">Parameters of the stem vulnerability curve</td>
<td align="left">VCstem_slope</td>
<td align="left">Numeric</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Parameters of the leaf vulnerability curve</td>
<td align="left">VCleaf_P12</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="even">
<td align="left">Parameters of the leaf vulnerability curve</td>
<td align="left">VCleaf_P50</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="odd">
<td align="left">Parameters of the leaf vulnerability curve</td>
<td align="left">VCleaf_P88</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="even">
<td align="left">Parameters of the leaf vulnerability curve</td>
<td align="left">VCleaf_slope</td>
<td align="left">Numeric</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Parameters of the root vulnerability curve</td>
<td align="left">VCroot_P12</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="even">
<td align="left">Parameters of the root vulnerability curve</td>
<td align="left">VCroot_P50</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="odd">
<td align="left">Parameters of the root vulnerability curve</td>
<td align="left">VCroot_P88</td>
<td align="left">Numeric</td>
<td align="left">MPa</td>
</tr>
<tr class="even">
<td align="left">Parameters of the root vulnerability curve</td>
<td align="left">VCroot_slope</td>
<td align="left">Numeric</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Leaf dry mass per leaf fresh mass (leaf dry matter
content, LDMC)</td>
<td align="left">LDMC</td>
<td align="left">Numeric</td>
<td align="left">mg/g</td>
</tr>
<tr class="even">
<td align="left">Leaf fuel moisture content (% of dry weight)</td>
<td align="left">LFMC</td>
<td align="left">Numeric</td>
<td align="left">% of dry weight</td>
</tr>
<tr class="odd">
<td align="left">Ratio of foliar (photosynthetic) + small branches
(&lt;6.35 mm) dry biomass to foliar (photosynthetic) dry biomass</td>
<td align="left">r635</td>
<td align="left">Numeric</td>
<td align="left">&gt;=1</td>
</tr>
<tr class="even">
<td align="left">High fuel heat content</td>
<td align="left">HeatContent</td>
<td align="left">Numeric</td>
<td align="left">kJ/kg</td>
</tr>
<tr class="odd">
<td align="left">Surface-area-to-volume ratio</td>
<td align="left">SAV</td>
<td align="left">Numeric</td>
<td align="left">m2/m3</td>
</tr>
<tr class="even">
<td align="left">Percent of lignin+cutin over dry weight in leaves</td>
<td align="left">LigninPercent</td>
<td align="left">Numeric</td>
<td align="left">%</td>
</tr>
<tr class="odd">
<td align="left">Barck thickness</td>
<td align="left">BarkThickness</td>
<td align="left">Numeric</td>
<td align="left">mm</td>
</tr>
<tr class="even">
<td align="left">Seedbank average longevity</td>
<td align="left">SeedLongevity</td>
<td align="left">Numeric</td>
<td align="left">yrs</td>
</tr>
<tr class="odd">
<td align="left">Seed dry mass</td>
<td align="left">SeedMass</td>
<td align="left">Numeric</td>
<td align="left">mg</td>
</tr>
</tbody>
</table>
<p>In the case of Bartlett’s dataset we are interested in points of the
vulnerability curve and stomatal behavior. We can check their
corresponding names in <code>HarmonizedTraitDefinition</code>. For
example, <code>Leaf P50 (MPa)</code> is the water potential
corresponding to the 50% conductance loss in leaves, and should be named
<code>VCleaf_P50</code> according to
<code>HarmonizedTraitDefinition</code>, and so on. We can use
<strong>dplyr</strong> function <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename()</a></code> to harmonize
notation. In this case, all plant traits we are interested in are given
in units of MPa, and <code>HarmonizedTraitDefinition</code> reports the
same units for these traits, so there is no need to harmonize
measurement units. The code for notation harmonization could be as
follows:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_var</span> <span class="op">&lt;-</span> <span class="va">db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Name</span>, <span class="st">"Leaf P50 (MPa)"</span>, <span class="st">"Stem P50 (MPa)"</span>, <span class="st">"Stem P88 (MPa)"</span>, <span class="st">"Stem P12 (MPa)"</span>, </span>
<span>                <span class="st">"Root P50 (MPa)"</span>, <span class="st">"Gs P50 (MPa)"</span>, <span class="st">"Gs 95 (MPa)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>originalName <span class="op">=</span> <span class="va">Name</span>,</span>
<span>                VCleaf_P50 <span class="op">=</span> <span class="st">"Leaf P50 (MPa)"</span>,</span>
<span>                VCstem_P50 <span class="op">=</span> <span class="st">"Stem P50 (MPa)"</span>,</span>
<span>                VCstem_P12 <span class="op">=</span> <span class="st">"Stem P12 (MPa)"</span>,</span>
<span>                VCstem_P88 <span class="op">=</span> <span class="st">"Stem P88 (MPa)"</span>,</span>
<span>                VCroot_P50 <span class="op">=</span> <span class="st">"Root P50 (MPa)"</span>,</span>
<span>                Gs_P50 <span class="op">=</span> <span class="st">"Gs P50 (MPa)"</span>,</span>
<span>                Gs_P95 <span class="op">=</span> <span class="st">"Gs 95 (MPa)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Reference <span class="op">=</span> <span class="st">"Bartlett et al. (2016)"</span><span class="op">)</span></span></code></pre></div>
<p>Note that we also renamed the column containing the plant species
into <code>originalName</code>. The original name represents the taxon
name that is used by the data set owner/provider and is key for
taxonomic harmonization. The result of this step should contain
<code>originalName</code>, plus one column for each harmonized trait,
and (preferably) a column called <code>Reference</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_var</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 310 × 9</span></span></span>
<span><span class="co">##    originalName    VCleaf_P50 VCstem_P50 VCstem_P88 VCstem_P12 VCroot_P50 Gs_P50</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Acacia greggii       <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Acer campestre       -<span style="color: #BB0000;">1.32</span>      -<span style="color: #BB0000;">3.87</span>      -<span style="color: #BB0000;">4.60</span>     -<span style="color: #BB0000;">3.19</span>       <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Acer grandiden…      <span style="color: #BB0000;">NA</span>         -<span style="color: #BB0000;">3.66</span>      -<span style="color: #BB0000;">7.14</span>     -<span style="color: #BB0000;">0.92</span>       -<span style="color: #BB0000;">0.86</span>  <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Acer monspessu…      -<span style="color: #BB0000;">1.89</span>      -<span style="color: #BB0000;">3.31</span>      -<span style="color: #BB0000;">4.61</span>     -<span style="color: #BB0000;">2.02</span>       -<span style="color: #BB0000;">1.6</span>   <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Acer negundo         <span style="color: #BB0000;">NA</span>         -<span style="color: #BB0000;">1.34</span>      -<span style="color: #BB0000;">2.74</span>     -<span style="color: #BB0000;">0.451</span>      -<span style="color: #BB0000;">0.3</span>   <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Acer pseudopla…      -<span style="color: #BB0000;">1.19</span>      -<span style="color: #BB0000;">2.37</span>      -<span style="color: #BB0000;">2.71</span>     -<span style="color: #BB0000;">1.95</span>       <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Acer rubrum          -<span style="color: #BB0000;">1.7</span>       -<span style="color: #BB0000;">3.9</span>       -<span style="color: #BB0000;">6</span>        -<span style="color: #BB0000;">2.5</span>        -<span style="color: #BB0000;">1.69</span>  <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Acer saccharum       <span style="color: #BB0000;">NA</span>         -<span style="color: #BB0000;">3.97</span>      <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>          -<span style="color: #BB0000;">1.5</span>   -<span style="color: #BB0000;">1.56</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Adansonia rubr…      <span style="color: #BB0000;">NA</span>         -<span style="color: #BB0000;">1.1</span>       -<span style="color: #BB0000;">2.82</span>     -<span style="color: #BB0000;">0.293</span>      <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Adansonia za         <span style="color: #BB0000;">NA</span>         -<span style="color: #BB0000;">1.7</span>       -<span style="color: #BB0000;">3.49</span>     -<span style="color: #BB0000;">0.59</span>       <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 300 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 2 more variables: Gs_P95 &lt;dbl&gt;, Reference &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="taxonomic-harmonization">Taxonomic harmonization<a class="anchor" aria-label="anchor" href="#taxonomic-harmonization"></a>
</h2>
<p>Package <strong>traits4models</strong> currently relies on <a href="https://www.worldfloraonline.org/" class="external-link">World Flora Online</a> for
taxonomic harmonization, via package <strong>WorldFlora</strong> <span class="citation">(Kindt 2020)</span> available at <a href="https://cran.r-project.org/package=WorldFlora" class="external-link">CRAN</a>. This
latter package requires a static copy of the World Flora Online
Taxonomic Backbone data that can be downloaded from the <a href="https://www.worldfloraonline.org/" class="external-link">World Flora Online</a> website.
Note that you should use a different DOI reference when reporting your
harmonization procedures. We are using here <a href="https://doi.org/10.5281/zenodo.8079052" class="external-link">v.2023.06</a>. We assume
the user has already downloaded the backbone and stored it in a file
called <em>classification.csv</em>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">WFO_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">DB_path</span>, <span class="st">"WFO_Backbone/classification.csv"</span><span class="op">)</span></span></code></pre></div>
<p>Taxonomic harmonization is done by calling function
<code><a href="../reference/harmonize_taxonomy_WFO.html">harmonize_taxonomy_WFO()</a></code> with a data frame (where notation
and units are already harmonized) and the path to the WFO backbone:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_post</span> <span class="op">&lt;-</span> <span class="fu">traits4models</span><span class="fu">::</span><span class="fu"><a href="../reference/harmonize_taxonomy_WFO.html">harmonize_taxonomy_WFO</a></span><span class="op">(</span><span class="va">db_var</span>, <span class="va">WFO_file</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">1496575</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">29</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">## <span style="font-weight: bold;">Delimiter:</span> "\t"</span></span>
<span><span class="co">## <span style="color: #BB0000;">chr</span>  (25): taxonID, scientificNameID, localID, scientificName, taxonRank, pa...</span></span>
<span><span class="co">## <span style="color: #BBBB00;">lgl</span>   (2): subtribe, nameAccordingToID</span></span>
<span><span class="co">## <span style="color: #0000BB;">date</span>  (2): created, modified</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">## Checking for fuzzy matches for 16 records</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Aleurites moluccana were:  Aleurites moluccanus, Aleurites moluccanus var. alaunii, Aleurites moluccanus var. floccosus, Aleurites moluccanus var. katoi, Aleurites moluccanus var. remyi, Aleurites moluccanus var. rockinghamensis, Aleurites moluccanus var. serotinus, Aleurites moluccanus var. moluccanus, Aleurites moluccanus var. aulanii</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Best fuzzy matches for  Aleurites moluccana were:  Aleurites moluccanus</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Corymbia callophylla were:  Corymbia calophylla</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Encelia califonica were:  Encelia californica, Encelia californica var. californica, Encelia californica var. asperifolia</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Best fuzzy matches for  Encelia califonica were:  Encelia californica</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Ficus religosa were:  Ficus religiosa, Ficus religiosa var. cordata, Ficus religiosa var. rhynchophylla</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Best fuzzy matches for  Ficus religosa were:  Ficus religiosa</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Hymenaea stignocarpa were:  Hymenaea stigonocarpa, Hymenaea stigonocarpa var. pubescens, Hymenaea stigonocarpa  var. stigonocarpa, Hymenaea stigonocarpa  var. brevipetiolata, Hymenaea stigonocarpa var. olfersiana</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Best fuzzy matches for  Hymenaea stignocarpa were:  Hymenaea stigonocarpa</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Macaranga denticulate were:  Macaranga denticulata, Macaranga denticulata var. pustulata, Macaranga denticulata var. zollingeri</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Best fuzzy matches for  Macaranga denticulate were:  Macaranga denticulata</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Milletia atropurpurea were:  Millettia atropurpurea</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Nothofagus alessandri were:  Nothofagus alessandrii</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for Palaquium sumatrana malaysia were only found for first 2 terms (Palaquium sumatrana)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## With Fuzzy.two, reduced matches to those of 2 words only</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Palaquium sumatrana malaysia were:  Palaquium sumatranum</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Rhododendron macrophylum were:  Rhododendron microphyllum, Rhododendron acrophilum, Rhododendron macrophyllum, Rhododendron macrophyllum f. album</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Best fuzzy matches for  Rhododendron macrophylum were:  Rhododendron macrophyllum</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Schinus terebinthifolius were:  Schinus terebinthifolia, Schinus terebinthifolius var. glaziovianus, Schinus terebinthifolia var. rhoifolia, Schinus terebinthifolius var. pohlianus, Schinus terebinthifolius var. raddianus, Schinus terebinthifolius var. damazianus, Schinus terebinthifolius var. selloanus, Schinus terebinthifolius var. ternifolius, Schinus terebinthifolius  var. acutifolius</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Best fuzzy matches for  Schinus terebinthifolius were:  Schinus terebinthifolia</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Sweitenia macrophylla were:  Swietenia macrophylla, Swietenia macrophylla var. marabaensis</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Best fuzzy matches for  Sweitenia macrophylla were:  Swietenia macrophylla</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Juniperus sillcicola were:  Juniperus silicicola</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fuzzy matches for  Pinus elliotii were:  Pinus elliottii  var. densa, Pinus elliottii, Pinus elliottii subsp. densa, Pinus elliottii subsp. austrokeysensis, Pinus elliottii  var. elliottii</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Best fuzzy matches for  Pinus elliotii were:  Pinus elliottii</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Checking new accepted IDs</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 39, including Berberis microphylla</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 39</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 47, including Camellia sasanqua</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 47</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 52, including Ceanothus cuneatus</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique Accepted case for record # 52</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 54, including Ceanothus megacarpus</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 54</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 56, including Ceanothus spinosus</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Smallest ID candidates for  56 were:  Ceanothus spinosus, Ceanothus spinosus</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Selected record with smallest ID for record # 56</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 71, including Combretum latifolium</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique Accepted case for record # 71</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 73, including Cordia americana</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique Accepted case for record # 73</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 75, including Cordia dentata</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique Accepted case for record # 75</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 80, including Corylus cornuta</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 80</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 112, including Ficus hispida</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 112</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 114, including Ficus racemosa</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 114</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 115, including Ficus religiosa</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 115</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 116, including Ficus semicordata</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 116</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 119, including Gaultheria hispida</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 119</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 127, including Heteromeles arbutifolia</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique Accepted case for record # 127</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 133, including Ilex aquifolium</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique Accepted case for record # 133</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 140, including Kielmeyera coriacea</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 140</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 149, including Lycium chilense</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 149</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 198, including Prunus armeniaca</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique Accepted case for record # 198</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 201, including Psychotria horizontalis</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 201</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 204, including Quercus agrifolia</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 204</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 210, including Quercus ilex</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 210</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 216, including Quercus robur</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 216</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 237, including Shorea parvifolia</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 237</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 239, including Sorbus torminalis</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique Accepted case for record # 239</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 240, including Styrax ferrugineus</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 240</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 263, including Abies alba</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 263</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 266, including Abies grandis</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 266</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 267, including Abies grandis</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 267</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 272, including Juniperus barbadensis</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 272</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 273, including Juniperus communis</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 273</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 279, including Juniperus communis</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 279</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 291, including Pinus mugo</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 291</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 296, including Pinus nigra</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Smallest ID candidates for  296 were:  Pinus nigra, Pinus nigra</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Selected record with smallest ID for record # 296</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 302, including Pinus kesiya  var. langbianensis</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 302</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Different candidates for original record # 308, including Cephalotaxus harringtonii</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Found unique non-synonym case for record # 308</span></span></code></pre>
<p>The function requires a column called <code>originalName</code>. It
performs both direct and fuzzy matching, which may lead to large
processing time for large datasets. If we inspect the result, we will
see the additional columns, informing about accepted names and parent
taxonomic entities:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_post</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 310 × 15</span></span></span>
<span><span class="co">##    originalName acceptedName acceptedNameAuthorship family genus specificEpithet</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Acacia greg… Senegalia g… (A.Gray) Britton &amp; Ro… Fabac… Sene… greggii        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Acer campes… Acer campes… L.                     Sapin… Acer  campestre      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Acer grandi… Acer saccha… (Nutt.) Desmarais      Sapin… Acer  saccharum      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Acer monspe… Acer monspe… L.                     Sapin… Acer  monspessulanum </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Acer negundo Acer negundo L.                     Sapin… Acer  negundo        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Acer pseudo… Acer pseudo… L.                     Sapin… Acer  pseudoplatanus </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Acer rubrum  Acer rubrum  L.                     Sapin… Acer  rubrum         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Acer saccha… Acer saccha… Marshall               Sapin… Acer  saccharum      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Adansonia r… Adansonia f… (Jum. &amp; H.Perrier) H.… Malva… Adan… fony           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Adansonia za Adansonia za Baill.                 Malva… Adan… za             </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 300 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 9 more variables: taxonRank &lt;chr&gt;, VCleaf_P50 &lt;dbl&gt;, VCstem_P50 &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   VCstem_P88 &lt;dbl&gt;, VCstem_P12 &lt;dbl&gt;, VCroot_P50 &lt;dbl&gt;, Gs_P50 &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   Gs_P95 &lt;dbl&gt;, Reference &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="checking-and-storing-harmonized-dataset">Checking and storing harmonized dataset<a class="anchor" aria-label="anchor" href="#checking-and-storing-harmonized-dataset"></a>
</h2>
<p>The packages includes function <code><a href="../reference/check_harmonized_table.html">check_harmonized_table()</a></code>
to check whether a given data frame conforms in structure and content to
what is later needed for parameter table filling:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/check_harmonized_table.html">check_harmonized_table</a></span><span class="op">(</span><span class="va">db_post</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BB00;">✔</span> The data frame is acceptable as harmonized source data.</span></span></code></pre>
<p>In this case, the data set is ready to be used in parameter
estimation.</p>
<p>Harmonized data tables should be preferably stored in compressed
<strong>.rds</strong> format. Moreover, all tables should be stored in
the same directory, here in the <code>Products/harmonized/</code>
path.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">DB_path</span>, <span class="st">"Products/harmonized/Bartlett_et_al_2016.rds"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">db_post</span>, <span class="va">file_out</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Bartlett2016" class="csl-entry">
Bartlett, Megan K, Tamir Klein, Steven Jansen, Brendan Choat, and Lawren
Sack. 2016. <span>“The Correlations and Sequence of Plant Stomatal,
Hydraulic, and Wilting Responses to Drought.”</span> <em>Proceedings of
the National Academy of Sciences of the United States of America</em>
113 (46): 13098–103. <a href="https://doi.org/10.1073/pnas.1604088113" class="external-link">https://doi.org/10.1073/pnas.1604088113</a>.
</div>
<div id="ref-Kattge2020" class="csl-entry">
Kattge, Jens, Gerhard Bönisch, Sandra Díaz, Sandra Lavorel, Iain Colin
Prentice, Paul Leadley, Susanne Tautenhahn, et al. 2020.
<span>“<span>TRY</span> Plant Trait Database – Enhanced Coverage and
Open Access.”</span> <em>Global Change Biology</em> 26 (1): 119–88. <a href="https://doi.org/10.1111/gcb.14904" class="external-link">https://doi.org/10.1111/gcb.14904</a>.
</div>
<div id="ref-kindt_worldflora_2020" class="csl-entry">
Kindt, Roeland. 2020. <span>“<span>WorldFlora</span>: <span>An</span>
<span>R</span> Package for Exact and Fuzzy Matching of Plant Names
Against the <span>World</span> <span>Flora</span> <span>Online</span>
Taxonomic Backbone Data.”</span> <em>Applications in Plant Sciences</em>
8 (9): e11388. <a href="https://doi.org/10.1002/aps3.11388" class="external-link">https://doi.org/10.1002/aps3.11388</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Miquel De Cáceres, Nicolas Martin-StPaul, Adriana Tovar, Víctor Granda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
